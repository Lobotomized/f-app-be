var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,a;function l(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function h(t){return null==t?"":t}function u(e){return e&&r(e.destroy)?e.destroy:t}function p(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function w(){return y(" ")}function b(){return y("")}function x(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function S(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}function A(t){a=t}function $(){if(!a)throw new Error("Function called outside component initialization");return a}function E(t){$().$$.on_mount.push(t)}function L(t){$().$$.on_destroy.push(t)}function T(){const t=$();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const o=function(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}(e,n);s.slice().forEach((e=>{e.call(t,o)}))}}}function R(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const B=[],M=[],O=[],P=[],z=Promise.resolve();let N=!1;function j(){N||(N=!0,z.then(U))}function I(t){O.push(t)}let q=!1;const D=new Set;function U(){if(!q){q=!0;do{for(let t=0;t<B.length;t+=1){const e=B[t];A(e),F(e.$$)}for(A(null),B.length=0;M.length;)M.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];D.has(e)||(D.add(e),e())}O.length=0}while(B.length);for(;P.length;)P.pop()();N=!1,q=!1,D.clear()}}function F(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(I)}}const H=new Set;let V;function Y(){V={r:0,c:[],p:V}}function J(){V.r||o(V.c),V=V.p}function K(t,e){t&&t.i&&(H.delete(t),t.i(e))}function W(t,e,n,s){if(t&&t.o){if(H.has(t))return;H.add(t),V.c.push((()=>{H.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function X(t,e){const n={},s={},o={$$scope:1};let r=t.length;for(;r--;){const i=t[r],c=e[r];if(c){for(const t in i)t in c||(s[t]=1);for(const t in c)o[t]||(n[t]=c[t],o[t]=1);t[r]=c}else for(const t in i)o[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}function Z(t){return"object"==typeof t&&null!==t?t:{}}function G(t){t&&t.c()}function Q(t,e,s,i){const{fragment:c,on_mount:a,on_destroy:l,after_update:h}=t.$$;c&&c.m(e,s),i||I((()=>{const e=a.map(n).filter(r);l?l.push(...e):o(e),t.$$.on_mount=[]})),h.forEach(I)}function tt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function et(e,n,r,i,c,l,h,u=[-1]){const p=a;A(e);const f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:n.target||p.$$.root};h&&h(f.root);let m=!1;if(f.ctx=r?r(e,n.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&function(t,e){-1===t.$$.dirty[0]&&(B.push(t),j(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();n.intro&&K(e.$$.fragment),Q(e,n.target,n.anchor,n.customElement),U()}A(p)}class nt{$destroy(){tt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function st(t){let e,n,s,o,r,i,c=t[1].content+"";function a(t,e){return t[1].postedOn?ct:it}let l=a(t),h=l(t);return{c(){e=g("p"),n=y(c),s=w(),o=g("span"),h.c(),r=w(),i=g("span"),i.textContent="Author : Anonymous",k(i,"class","flexAlignSelfEnd colorSuccess nowText svelte-11zizuv"),k(o,"class","flexRow flexJustifySpaceBetween svelte-11zizuv"),k(e,"class","messageYou colorSecondary flexColumn flexJustifySpaceBetween svelte-11zizuv")},m(t,c){f(t,e,c),p(e,n),p(e,s),p(e,o),h.m(o,null),p(o,r),p(o,i)},p(t,e){2&e&&c!==(c=t[1].content+"")&&C(n,c),l===(l=a(t))&&h?h.p(t,e):(h.d(1),h=l(t),h&&(h.c(),h.m(o,r)))},d(t){t&&d(e),h.d()}}}function ot(t){let e,n,s;return{c(){e=g("div"),n=g("img"),l(n.src,s=t[1].photoUrl)||k(n,"src",s),k(n,"alt",""),k(n,"class","svelte-11zizuv"),k(e,"class","messageYou svelte-11zizuv")},m(t,s){f(t,e,s),p(e,n)},p(t,e){2&e&&!l(n.src,s=t[1].photoUrl)&&k(n,"src",s)},d(t){t&&d(e)}}}function rt(t){let e;function n(t,e){return t[1].photoUrl?lt:at}let s=n(t),o=s(t);return{c(){o.c(),e=b()},m(t,n){o.m(t,n),f(t,e,n)},p(t,r){s===(s=n(t))&&o?o.p(t,r):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&d(e)}}}function it(e){let n;return{c(){n=g("span"),n.textContent="Сега",k(n,"class","colorPrimary muted nowText svelte-11zizuv")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function ct(t){let e,n,s=new Date(Date.parse(t[1].postedOn)).toLocaleTimeString("en-US")+"";return{c(){e=g("span"),n=y(s),k(e,"class","colorPrimary muted nowText svelte-11zizuv")},m(t,s){f(t,e,s),p(e,n)},p(t,e){2&e&&s!==(s=new Date(Date.parse(t[1].postedOn)).toLocaleTimeString("en-US")+"")&&C(n,s)},d(t){t&&d(e)}}}function at(t){let e,n,s,o,r,i,c=t[1].content+"";function a(t,e){return t[1].postedOn?ut:ht}let l=a(t),h=l(t);return{c(){e=g("p"),n=y(c),s=w(),o=g("span"),h.c(),r=w(),i=g("span"),i.textContent="Author : Anonymous",k(i,"class","flexAlignSelfEnd colorSuccess nowText svelte-11zizuv"),k(o,"class","flexRow flexJustifySpaceBetween svelte-11zizuv"),k(e,"class","message flexColumn flexJustifySpaceBetween svelte-11zizuv")},m(t,c){f(t,e,c),p(e,n),p(e,s),p(e,o),h.m(o,null),p(o,r),p(o,i)},p(t,e){2&e&&c!==(c=t[1].content+"")&&C(n,c),l===(l=a(t))&&h?h.p(t,e):(h.d(1),h=l(t),h&&(h.c(),h.m(o,r)))},d(t){t&&d(e),h.d()}}}function lt(t){let e,n,s;return{c(){e=g("div"),n=g("img"),l(n.src,s=t[1].photoUrl)||k(n,"src",s),k(n,"alt",""),k(n,"class","svelte-11zizuv"),k(e,"class","message svelte-11zizuv")},m(t,s){f(t,e,s),p(e,n)},p(t,e){2&e&&!l(n.src,s=t[1].photoUrl)&&k(n,"src",s)},d(t){t&&d(e)}}}function ht(e){let n;return{c(){n=g("span"),n.textContent="Сега",k(n,"class","colorSecondary muted nowText svelte-11zizuv")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function ut(t){let e,n,s=new Date(Date.parse(t[1].postedOn)).toLocaleTimeString("en-US")+"";return{c(){e=g("span"),n=y(s),k(e,"class","colorSecondary muted nowText svelte-11zizuv")},m(t,s){f(t,e,s),p(e,n)},p(t,e){2&e&&s!==(s=new Date(Date.parse(t[1].postedOn)).toLocaleTimeString("en-US")+"")&&C(n,s)},d(t){t&&d(e)}}}function pt(e){let n;function s(t,e){return t[0]?rt:t[1].photoUrl?ot:st}let o=s(e),r=o(e);return{c(){n=g("div"),r.c()},m(t,e){f(t,n,e),r.m(n,null)},p(t,[e]){o===(o=s(t))&&r?r.p(t,e):(r.d(1),r=o(t),r&&(r.c(),r.m(n,null)))},i:t,o:t,d(t){t&&d(n),r.d()}}}function ft(t,e,n){let{me:s}=e,{message:o}=e;return t.$$set=t=>{"me"in t&&n(0,s=t.me),"message"in t&&n(1,o=t.message)},[s,o]}class dt extends nt{constructor(t){super(),et(this,t,ft,pt,i,{me:0,message:1})}}const mt=[];function gt(t,e){return{subscribe:vt(t,e).subscribe}}function vt(e,n=t){let s;const o=new Set;function r(t){if(i(e,t)&&(e=t,s)){const t=!mt.length;for(const t of o)t[1](),mt.push(t,e);if(t){for(let t=0;t<mt.length;t+=2)mt[t][0](mt[t+1]);mt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(i,c=t){const a=[i,c];return o.add(a),1===o.size&&(s=n(r)||t),i(e),()=>{o.delete(a),0===o.size&&(s(),s=null)}}}}function yt(e,n,s){const i=!Array.isArray(e),c=i?[e]:e,a=n.length<2;return gt(s,(e=>{let s=!1;const l=[];let h=0,u=t;const p=()=>{if(h)return;u();const s=n(i?l[0]:l,e);a?e(s):u=r(s)?s:t},f=c.map(((e,n)=>function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(e,(t=>{l[n]=t,h&=~(1<<n),s&&p()}),(()=>{h|=1<<n}))));return s=!0,p(),function(){o(f),u()}}))}const wt=vt({}),bt=vt(""),xt=vt(0);function kt(e){let n,s,o,r,i,c,a,h=e[0].name+"";return{c(){n=g("div"),s=g("img"),r=w(),i=g("h5"),c=y(h),l(s.src,o="https://via.placeholder.com/300")||k(s,"src","https://via.placeholder.com/300"),k(s,"class","avatar svelte-19mllvu"),k(s,"alt",""),k(i,"class","svelte-19mllvu"),k(n,"class",a="flexRow main flexJustifySpaceBetween "+(e[0].newMessages&&e[1]!==e[0]._id?"borderSuccess":"borderPrimary")+" "+(e[1]===e[0]._id?"selected":"")+" svelte-19mllvu")},m(t,e){f(t,n,e),p(n,s),p(n,r),p(n,i),p(i,c)},p(t,[e]){1&e&&h!==(h=t[0].name+"")&&C(c,h),3&e&&a!==(a="flexRow main flexJustifySpaceBetween "+(t[0].newMessages&&t[1]!==t[0]._id?"borderSuccess":"borderPrimary")+" "+(t[1]===t[0]._id?"selected":"")+" svelte-19mllvu")&&k(n,"class",a)},i:t,o:t,d(t){t&&d(n)}}}function Ct(t,e,n){let{room:s}=e,o="";return bt.subscribe((t=>{n(1,o=t)})),t.$$set=t=>{"room"in t&&n(0,s=t.room)},[s,o]}class _t extends nt{constructor(t){super(),et(this,t,Ct,kt,i,{room:0})}}var St=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,At=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],$t=function(t){var e=t,n=t.indexOf("["),s=t.indexOf("]");-1!=n&&-1!=s&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));for(var o,r,i=St.exec(t||""),c={},a=14;a--;)c[At[a]]=i[a]||"";return-1!=n&&-1!=s&&(c.source=e,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(t,e){var n=/\/{2,9}/g,s=e.replace(n,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||s.splice(0,1);"/"==e.substr(e.length-1,1)&&s.splice(s.length-1,1);return s}(0,c.path),c.queryKey=(o=c.query,r={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(r[e]=n)})),r),c};var Et,Lt,Tt=(Et=function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},Et(Lt={exports:{}},Lt.exports),Lt.exports),Rt="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Bt(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||Tt))return new XMLHttpRequest}catch(t){}if(!e)try{return new(Rt[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function Mt(t,...e){return e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})}const Ot=setTimeout,Pt=clearTimeout;function zt(t,e){e.useNativeTimers?(t.setTimeoutFn=Ot.bind(Rt),t.clearTimeoutFn=Pt.bind(Rt)):(t.setTimeoutFn=setTimeout.bind(Rt),t.clearTimeoutFn=clearTimeout.bind(Rt))}var Nt=jt;function jt(t){if(t)return function(t){for(var e in jt.prototype)t[e]=jt.prototype[e];return t}(t)}jt.prototype.on=jt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},jt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},jt.prototype.off=jt.prototype.removeListener=jt.prototype.removeAllListeners=jt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,s=this._callbacks["$"+t];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<s.length;o++)if((n=s[o])===e||n.fn===e){s.splice(o,1);break}return 0===s.length&&delete this._callbacks["$"+t],this},jt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){s=0;for(var o=(n=n.slice(0)).length;s<o;++s)n[s].apply(this,e)}return this},jt.prototype.emitReserved=jt.prototype.emit,jt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},jt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const It=Object.create(null);It.open="0",It.close="1",It.ping="2",It.pong="3",It.message="4",It.upgrade="5",It.noop="6";const qt=Object.create(null);Object.keys(It).forEach((t=>{qt[It[t]]=t}));const Dt={type:"error",data:"parser error"},Ut="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Ft="function"==typeof ArrayBuffer,Ht=({type:t,data:e},n,s)=>{return Ut&&e instanceof Blob?n?s(e):Vt(e,s):Ft&&(e instanceof ArrayBuffer||(o=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer))?n?s(e):Vt(new Blob([e]),s):s(It[t]+(e||""));var o},Vt=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)};for(var Yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jt="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Kt=0;Kt<Yt.length;Kt++)Jt[Yt.charCodeAt(Kt)]=Kt;const Wt="function"==typeof ArrayBuffer,Xt=(t,e)=>{if("string"!=typeof t)return{type:"message",data:Gt(t,e)};const n=t.charAt(0);if("b"===n)return{type:"message",data:Zt(t.substring(1),e)};return qt[n]?t.length>1?{type:qt[n],data:t.substring(1)}:{type:qt[n]}:Dt},Zt=(t,e)=>{if(Wt){const n=function(t){var e,n,s,o,r,i=.75*t.length,c=t.length,a=0;"="===t[t.length-1]&&(i--,"="===t[t.length-2]&&i--);var l=new ArrayBuffer(i),h=new Uint8Array(l);for(e=0;e<c;e+=4)n=Jt[t.charCodeAt(e)],s=Jt[t.charCodeAt(e+1)],o=Jt[t.charCodeAt(e+2)],r=Jt[t.charCodeAt(e+3)],h[a++]=n<<2|s>>4,h[a++]=(15&s)<<4|o>>2,h[a++]=(3&o)<<6|63&r;return l}(t);return Gt(n,e)}return{base64:!0,data:t}},Gt=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t,Qt=String.fromCharCode(30);class te extends Nt{constructor(t){super(),this.writable=!1,zt(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const n=new Error(t);return n.type="TransportError",n.description=e,super.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){const e=Xt(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}}var ee,ne="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),se={},oe=0,re=0;function ie(t){var e="";do{e=ne[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function ce(){var t=ie(+new Date);return t!==ee?(oe=0,ee=t):t+"."+ie(oe++)}for(;re<64;re++)se[ne[re]]=re;ce.encode=ie,ce.decode=function(t){var e=0;for(re=0;re<t.length;re++)e=64*e+se[t.charAt(re)];return e};var ae=ce,le=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},he=function(t){for(var e={},n=t.split("&"),s=0,o=n.length;s<o;s++){var r=n[s].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e};class ue extends te{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){((t,e)=>{const n=t.split(Qt),s=[];for(let t=0;t<n.length;t++){const o=Xt(n[t],e);if(s.push(o),"error"===o.type)break}return s})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const n=t.length,s=new Array(n);let o=0;t.forEach(((t,r)=>{Ht(t,!1,(t=>{s[r]=t,++o===n&&e(s.join(Qt))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ae()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const s=le(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(s.length?"?"+s:"")}}function pe(){}const fe=null!=new Bt({xdomain:!1}).responseType;class de extends Nt{constructor(t,e){super(),zt(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=Mt(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new Bt(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=de.requestsCount++,de.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=pe,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete de.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}abort(){this.cleanup()}}if(de.requestsCount=0,de.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",me);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Rt?"pagehide":"unload",me,!1)}function me(){for(let t in de.requests)de.requests.hasOwnProperty(t)&&de.requests[t].abort()}const ge="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),ve=Rt.WebSocket||Rt.MozWebSocket,ye="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class we extends te{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=ye?{}:Mt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=ye?new ve(t,e,n):e?new ve(t,e):new ve(t)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],s=e===t.length-1;Ht(n,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}s&&ge((()=>{this.writable=!0,this.emit("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=ae()),this.supportsBinary||(t.b64=1);const s=le(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(s.length?"?"+s:"")}check(){return!(!ve||"__initialize"in ve&&this.name===we.prototype.name)}}const be={websocket:we,polling:class extends ue{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=fe&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new de(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(t=>{this.onError("xhr post error",t)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t=>{this.onError("xhr poll error",t)})),this.pollXhr=t}}};class xe extends Nt{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=$t(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=$t(e.host).host),zt(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=he(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=function(t){const e={};for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new be[t](n)}open(){let t;if(this.opts.rememberUpgrade&&xe.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(t){let e=this.createTransport(t),n=!1;xe.priorWebsocketSuccess=!1;const s=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!n)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;xe.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function o(){n||(n=!0,l(),e.close(),e=null)}const r=t=>{const n=new Error("probe error: "+t);n.transport=e.name,o(),this.emitReserved("upgradeError",n)};function i(){r("transport closed")}function c(){r("socket closed")}function a(t){e&&t.name!==e.name&&o()}const l=()=>{e.removeListener("open",s),e.removeListener("error",r),e.removeListener("close",i),this.off("close",c),this.off("upgrading",a)};e.once("open",s),e.once("error",r),e.once("close",i),this.once("close",c),this.once("upgrading",a),e.open()}onOpen(){if(this.readyState="open",xe.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,s){if("function"==typeof e&&(s=e,e=void 0),"function"==typeof n&&(s=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():t()})):this.upgrading?n():t()),this}onError(t){xe.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const s=t.length;for(;n<s;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}xe.protocol=4;const ke="function"==typeof ArrayBuffer,Ce=Object.prototype.toString,_e="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ce.call(Blob),Se="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ce.call(File);function Ae(t){return ke&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||_e&&t instanceof Blob||Se&&t instanceof File}function $e(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,n=t.length;e<n;e++)if($e(t[e]))return!0;return!1}if(Ae(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return $e(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&$e(t[e]))return!0;return!1}function Ee(t){const e=[],n=t.data,s=t;return s.data=Le(n,e),s.attachments=e.length,{packet:s,buffers:e}}function Le(t,e){if(!t)return t;if(Ae(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=Le(t[s],e);return n}if("object"==typeof t&&!(t instanceof Date)){const n={};for(const s in t)t.hasOwnProperty(s)&&(n[s]=Le(t[s],e));return n}return t}function Te(t,e){return t.data=Re(t.data,e),t.attachments=void 0,t}function Re(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Re(t[n],e);else if("object"==typeof t)for(const n in t)t.hasOwnProperty(n)&&(t[n]=Re(t[n],e));return t}var Be;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(Be||(Be={}));class Me extends Nt{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===Be.BINARY_EVENT||e.type===Be.BINARY_ACK?(this.reconstructor=new Oe(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!Ae(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(void 0===Be[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Be.BINARY_EVENT||n.type===Be.BINARY_ACK){const s=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const o=t.substring(s,e);if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===t.charAt(e+1)){const s=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}n.nsp=t.substring(s,e)}else n.nsp="/";const s=t.charAt(e+1);if(""!==s&&Number(s)==s){const s=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){const s=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!Me.isPayloadValid(n.type,s))throw new Error("invalid payload");n.data=s}return n}static isPayloadValid(t,e){switch(t){case Be.CONNECT:return"object"==typeof e;case Be.DISCONNECT:return void 0===e;case Be.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case Be.EVENT:case Be.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case Be.ACK:case Be.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class Oe{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=Te(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Pe=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Be},Encoder:class{encode(t){return t.type!==Be.EVENT&&t.type!==Be.ACK||!$e(t)?[this.encodeAsString(t)]:(t.type=t.type===Be.EVENT?Be.BINARY_EVENT:Be.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==Be.BINARY_EVENT&&t.type!==Be.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),e}encodeAsBinary(t){const e=Ee(t),n=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(n),s}},Decoder:Me});function ze(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Ne=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class je extends Nt{constructor(t,e,n){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ze(t,"open",this.onopen.bind(this)),ze(t,"packet",this.onpacket.bind(this)),ze(t,"error",this.onerror.bind(this)),ze(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Ne.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const n={type:Be.EVENT,data:e,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,s=e.pop();this._registerAckCallback(t,s),n.id=t}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?this.packet(n):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,e){const n=this.flags.timeout;if(void 0===n)return void(this.acks[t]=e);const s=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),n);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(s),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this.packet({type:Be.CONNECT,data:t})})):this.packet({type:Be.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Be.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Be.EVENT:case Be.BINARY_EVENT:this.onevent(t);break;case Be.ACK:case Be.BINARY_ACK:this.onack(t);break;case Be.DISCONNECT:this.ondisconnect();break;case Be.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let n=!1;return function(...s){n||(n=!0,e.packet({type:Be.ACK,id:t,data:s}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Be.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var Ie=qe;function qe(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}qe.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},qe.prototype.reset=function(){this.attempts=0},qe.prototype.setMin=function(t){this.ms=t},qe.prototype.setMax=function(t){this.max=t},qe.prototype.setJitter=function(t){this.jitter=t};class De extends Nt{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,zt(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=e.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Ie({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const s=e.parser||Pe;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new xe(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=ze(e,"open",(function(){n.onopen(),t&&t()})),o=ze(e,"error",(e=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",e),t?t(e):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&s();const n=this.setTimeoutFn((()=>{s(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ze(t,"ping",this.onping.bind(this)),ze(t,"data",this.ondata.bind(this)),ze(t,"error",this.onerror.bind(this)),ze(t,"close",this.onclose.bind(this)),ze(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n||(n=new je(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ue={};function Fe(t,e){"object"==typeof t&&(e=t,t=void 0);const n=function(t,e="",n){let s=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),s=$t(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(n&&n.port===s.port?"":":"+s.port),s}(t,(e=e||{}).path||"/socket.io"),s=n.source,o=n.id,r=n.path,i=Ue[o]&&r in Ue[o].nsps;let c;return e.forceNew||e["force new connection"]||!1===e.multiplex||i?c=new De(s,e):(Ue[o]||(Ue[o]=new De(s,e)),c=Ue[o]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Fe,{Manager:De,Socket:je,io:Fe,connect:Fe});const He=Fe("http://localhost:8080"),Ve="http://localhost:8080/api";let Ye="";bt.subscribe((t=>{Ye=t}));const Je={postFile:async function(t,e){if(localStorage.getItem("fappToken")){const n=await fetch(Ve+t,{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("fappToken")},body:e});if(n.status>400&&n.status<600)throw new Error("Нещо не е наред");return await n.json()}{const n=await fetch(Ve+t,{method:"POST",headers:{},body:e});if(n.status>400&&n.status<600){if(11e3===(await n.json())?.errors?.code)throw new Error("Имейлът е вече използван");throw new Error("Нещо не е наред")}return await n.json()}},post:async function(t,e){if(localStorage.getItem("fappToken")){const n=await fetch(Ve+t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("fappToken")},body:JSON.stringify(e)}),s=await n.json();if(n.status>400&&n.status<600)throw new Error(s.message);return s}{const n=await fetch(Ve+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(n.status>400&&n.status<600){const t=await n.json();if(11e3===t?.errors?.code)throw new Error("Имейлът е вече използван");throw new Error(t.message)}return await n.json()}},get:async function(t){if(localStorage.getItem("fappToken")){const e=await fetch(Ve+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("fappToken")}});return await e.json()}{const e=await fetch(Ve+t,{method:"GET",headers:{"Content-Type":"application/json"}});return await e.json()}},delete:async function(t){if(localStorage.getItem("fappToken")){const e=await fetch(Ve+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("fappToken")}});return await e.json()}{const e=await fetch(Ve+t,{method:"DELETE",headers:{"Content-Type":"application/json"}});return await e.json()}},login:async function(t){try{const e=await this.post("/login",t);localStorage.setItem("fappToken",e.token),localStorage.setItem("fappUser",JSON.stringify(e.user)),wt.set(e.user)}catch(t){throw t}},getMe:async function(){try{const t=await this.get("/getMe");wt.set(t.me[0])}catch(t){throw t}},register:async function(t){try{return await this.post("/register",t)}catch(t){throw t}},test:async function(){try{await this.post("/test")}catch(t){throw t}},getFantasies:async function(t){let e=t||0;try{return await this.get("/fantasies?skip="+e)}catch(t){throw t}},write:async function(t){try{return await this.post("/write",{content:t})}catch(t){throw t}},getRooms:async function(){try{return await this.get("/loadRooms")}catch(t){throw t}},getRoom:async function(){try{return await this.get("/loadRoom")}catch(t){throw t}},getMessages:async function(t){try{if(!Ye){const e=await this.getRoom();e.newMessages&&NewMessagesCount.set(newMsgCount-1),bt.set(e._id);return await this.get("/loadMessages/"+e._id+"?limit="+t)}return await this.get("/loadMessages/"+Ye+"?limit="+t)}catch(t){throw t}},getNewMessagesCount:async function(){try{return await this.get("/newMessagesCount")}catch(t){throw t}},getUserPhotos:async function(t){try{return await this.get("/photosForUser?skip="+t)}catch(t){throw t}},getRoomByPostAndUser:async function(t){try{return await this.get("/loadRoomByPostAndUser/"+t)}catch(t){throw t}},createRoomFromPostId:async function(t){try{const e=await this.post("/createRoomFromPostId",{postId:t});return He.emit("joinFromPost",{postId:t,chatId:e._id}),e}catch(t){throw t}},deletePhoto:async function(t){try{return await this.delete("/photo/"+t)}catch(t){throw t}},leaveRoom:async function(t){try{await this.post("/leaveRoom",{roomId:t})}catch(t){throw t}},setAvatar:async function(t){try{await this.post("/setAvatar",{photoId:t})}catch(t){throw t}},setProfileShareToTrue:async function(t){try{await this.post("/setProfileShareToTrue",{roomId:t})}catch(t){throw t}}};function Ke(t,e,n){const s=t.slice();return s[22]=e[n],s}function We(t,e,n){const s=t.slice();return s[25]=e[n],s}function Xe(t,e,n){const s=t.slice();return s[28]=e[n],s}function Ze(t){let e,n,s,r,i,c,a,l,h,u,v,y,b,C,S,A,$,E,L,T,R,B=t[0]&&Ge(t),M=t[3],O=[];for(let e=0;e<M.length;e+=1)O[e]=on(We(t,M,e));const P=t=>W(O[t],1,1,(()=>{O[t]=null}));function z(t,e){return t[7].profileShareByResponder&&t[7].profileShareByAuthor?an:((null==A||176&e)&&(A=!!(!t[7].profileShareByAuthor&&!t[7].profileShareByResponder||!t[7].profileShareByResponder&&t[5].responderRooms.indexOf(t[4])>-1||!t[7].profileShareByAuthor&&t[5].authorRooms.indexOf(t[4])>-1)),A?cn:rn)}let N=z(t,-1),j=N(t);return{c(){e=g("div"),n=g("h1"),n.innerHTML='Чат със\n        <span class="colorSecondary">Анонимен</span>',s=w(),B&&B.c(),r=w(),i=g("div"),c=g("div"),a=g("button"),a.textContent="Излез от стая",l=w(),h=g("button"),h.textContent="Зареди още",u=w();for(let t=0;t<O.length;t+=1)O[t].c();v=w(),y=g("div"),b=g("textarea"),C=w(),S=g("div"),j.c(),$=w(),E=g("button"),E.textContent="Изпрати",k(n,"class","chatWithText svelte-4hbsh8"),k(a,"class","buttonPrimary leaveRoom svelte-4hbsh8"),k(h,"class","buttonSecondary loadMore svelte-4hbsh8"),k(c,"class","flexRow"),k(i,"class","messages svelte-4hbsh8"),k(b,"class","textAreaSecondary writingPlace svelte-4hbsh8"),k(b,"name",""),k(b,"id",""),k(b,"cols","30"),k(b,"rows","5"),k(E,"class","buttonSuccess svelte-4hbsh8"),k(S,"class","flexRow buttonRow svelte-4hbsh8"),k(y,"class","write rowColumn flexJustifyCenter fixed svelte-4hbsh8"),k(e,"class","flexColumn firstColumn svelte-4hbsh8")},m(o,d){f(o,e,d),p(e,n),p(e,s),B&&B.m(e,null),p(e,r),p(e,i),p(i,c),p(c,a),p(c,l),p(c,h),p(i,u);for(let t=0;t<O.length;t+=1)O[t].m(i,null);p(e,v),p(e,y),p(y,b),_(b,t[1]),p(y,C),p(y,S),j.m(S,null),p(S,$),p(S,E),L=!0,T||(R=[x(a,"click",t[13]),x(h,"click",t[10]),x(b,"keydown",t[14]),x(b,"input",t[17]),x(E,"click",t[11])],T=!0)},p(t,n){if(t[0]?B?B.p(t,n):(B=Ge(t),B.c(),B.m(e,r)):B&&(B.d(1),B=null),40&n){let e;for(M=t[3],e=0;e<M.length;e+=1){const s=We(t,M,e);O[e]?(O[e].p(s,n),K(O[e],1)):(O[e]=on(s),O[e].c(),K(O[e],1),O[e].m(i,null))}for(Y(),e=M.length;e<O.length;e+=1)P(e);J()}2&n&&_(b,t[1]),N===(N=z(t,n))&&j?j.p(t,n):(j.d(1),j=N(t),j&&(j.c(),j.m(S,$)))},i(t){if(!L){for(let t=0;t<M.length;t+=1)K(O[t]);L=!0}},o(t){O=O.filter(Boolean);for(let t=0;t<O.length;t+=1)W(O[t]);L=!1},d(t){t&&d(e),B&&B.d(),m(O,t),j.d(),T=!1,o(R)}}}function Ge(t){let e;function n(t,e){return t[6].length?tn:Qe}let s=n(t),o=s(t);return{c(){e=g("div"),o.c(),k(e,"class","photoSearch svelte-4hbsh8")},m(t,n){f(t,e,n),o.m(e,null)},p(t,r){s===(s=n(t))&&o?o.p(t,r):(o.d(1),o=s(t),o&&(o.c(),o.m(e,null)))},d(t){t&&d(e),o.d()}}}function Qe(e){let n;return{c(){n=g("h1"),n.textContent="Нямате качени снимки. Качете от профила си.",k(n,"class","noPhotos svelte-4hbsh8")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function tn(t){let e,n=t[6],s=[];for(let e=0;e<n.length;e+=1)s[e]=en(Xe(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=b()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);f(t,e,n)},p(t,o){if(576&o){let r;for(n=t[6],r=0;r<n.length;r+=1){const i=Xe(t,n,r);s[r]?s[r].p(i,o):(s[r]=en(i),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(t){m(s,t),t&&d(e)}}}function en(t){let e,n,s,o;function r(){return t[16](t[28])}return{c(){e=g("img"),l(e.src,n=t[28].imageUrl)||k(e,"src",n),k(e,"class","photoInList svelte-4hbsh8"),k(e,"alt","")},m(t,n){f(t,e,n),s||(o=x(e,"click",r),s=!0)},p(s,o){t=s,64&o&&!l(e.src,n=t[28].imageUrl)&&k(e,"src",n)},d(t){t&&d(e),s=!1,o()}}}function nn(t){let e,n;return e=new dt({props:{message:t[25],me:!1}}),{c(){G(e.$$.fragment)},m(t,s){Q(e,t,s),n=!0},p(t,n){const s={};8&n&&(s.message=t[25]),e.$set(s)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function sn(t){let e,n;return e=new dt({props:{message:t[25],me:!0}}),{c(){G(e.$$.fragment)},m(t,s){Q(e,t,s),n=!0},p(t,n){const s={};8&n&&(s.message=t[25]),e.$set(s)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function on(t){let e,n,s,o;const r=[sn,nn],i=[];function c(t,e){return t[25].author===t[5]._id?0:1}return e=c(t),n=i[e]=r[e](t),{c(){n.c(),s=b()},m(t,n){i[e].m(t,n),f(t,s,n),o=!0},p(t,o){let a=e;e=c(t),e===a?i[e].p(t,o):(Y(),W(i[a],1,1,(()=>{i[a]=null})),J(),n=i[e],n?n.p(t,o):(n=i[e]=r[e](t),n.c()),K(n,1),n.m(s.parentNode,s))},i(t){o||(K(n),o=!0)},o(t){W(n),o=!1},d(t){i[e].d(t),t&&d(s)}}}function rn(e){let n,s,o;return{c(){n=g("button"),n.textContent="Събеседникът не е разрешил",k(n,"class","buttonSecondary svelte-4hbsh8")},m(t,r){f(t,n,r),s||(o=x(n,"click",e[8]),s=!0)},p:t,d(t){t&&d(n),s=!1,o()}}}function cn(e){let n;return{c(){n=g("button"),n.textContent="И двамата трябва да споделя",k(n,"class","buttonSuccess svelte-4hbsh8")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function an(e){let n,s,o;return{c(){n=g("button"),n.textContent="Сподели снимка",k(n,"class","buttonSuccess svelte-4hbsh8")},m(t,r){f(t,n,r),s||(o=x(n,"click",e[15]),s=!0)},p:t,d(t){t&&d(n),s=!1,o()}}}function ln(t){let e;return{c(){e=g("h3"),e.innerHTML='Нямате активни чатове. Започнете такъв от\n      <a class="fantasiesLink svelte-4hbsh8" href="#/fantasies">Анонимни фантазии</a>',k(e,"class","svelte-4hbsh8")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function hn(t){let e,n,s,o,r,i;function c(){return t[18](t[22])}return n=new _t({props:{room:t[22]}}),{c(){e=g("div"),G(n.$$.fragment),s=w()},m(t,a){f(t,e,a),Q(n,e,null),p(e,s),o=!0,r||(i=x(e,"click",c),r=!0)},p(e,s){t=e;const o={};4&s&&(o.room=t[22]),n.$set(o)},i(t){o||(K(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){t&&d(e),tt(n),r=!1,i()}}}function un(t){let e,n,s,o,r,i,c,a=""!=t[4]&&Ze(t),l=0===t[2].length&&ln(),h=t[2],u=[];for(let e=0;e<h.length;e+=1)u[e]=hn(Ke(t,h,e));const v=t=>W(u[t],1,1,(()=>{u[t]=null}));return{c(){e=g("div"),a&&a.c(),n=w(),l&&l.c(),s=w(),o=g("div");for(let t=0;t<u.length;t+=1)u[t].c();k(o,"class","flexColumn chatsColumnScreen svelte-4hbsh8"),k(e,"class","chat flexRow flexJustifySpaceBetween svelte-4hbsh8")},m(h,d){f(h,e,d),a&&a.m(e,null),p(e,n),l&&l.m(e,null),p(e,s),p(e,o);for(let t=0;t<u.length;t+=1)u[t].m(o,null);r=!0,i||(c=x(e,"click",t[19]),i=!0)},p(t,[r]){if(""!=t[4]?a?(a.p(t,r),16&r&&K(a,1)):(a=Ze(t),a.c(),K(a,1),a.m(e,n)):a&&(Y(),W(a,1,1,(()=>{a=null})),J()),0===t[2].length?l||(l=ln(),l.c(),l.m(e,s)):l&&(l.d(1),l=null),4100&r){let e;for(h=t[2],e=0;e<h.length;e+=1){const n=Ke(t,h,e);u[e]?(u[e].p(n,r),K(u[e],1)):(u[e]=hn(n),u[e].c(),K(u[e],1),u[e].m(o,null))}for(Y(),e=h.length;e<u.length;e+=1)v(e);J()}},i(t){if(!r){K(a);for(let t=0;t<h.length;t+=1)K(u[t]);r=!0}},o(t){W(a),u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)W(u[t]);r=!1},d(t){t&&d(e),a&&a.d(),l&&l.d(),m(u,t),i=!1,c()}}}function pn(t,e,n){let s=!1,o="",r=[],i=[],c="",a=0,l={},h=50,u=[],p={};wt.subscribe((t=>{n(5,l=t)})),xt.subscribe((t=>{a=t})),bt.subscribe((t=>{n(4,c=t)}));const f=async function(t){He.emit("message",{message:"photo",roomId:c,photo:t._id,photoUrl:t.imageUrl}),n(3,i=[...i,{content:"photo",author:l._id,photo:t._id,photoUrl:t.imageUrl}]),n(0,s=!1)},d=function(){He.emit("message",{message:o,roomId:c}),""!=o&&n(3,i=[...i,{content:o,author:l._id}]),n(1,o=""),setTimeout((()=>{window.scrollTo({top:1e24,behavior:"smooth"})}),1)};He.on("connect",(()=>{console.log("connected")})),He.on("message",(async t=>{if(t.roomId!=c){console.log("vliza inside");r.find((e=>e._id===t.roomId))||n(2,r=await Je.getRooms()),n(2,r=r.map((e=>e._id===t.roomId?(e.newMessages||xt.set(a+1),{...e,newMessages:!0}):e)))}else"#/chats"!=window.location.hash&&n(2,r=r.map((e=>e._id===t.roomId?(e.newMessages||xt.set(a+1),{...e,newMessages:!0}):e)));""!=t.message&&n(3,i=[...i,{content:t.message,author:t.author}])}));const m=async function(t){await Je.getMe(),n(7,p=r.find((e=>e._id===t))),console.log(p,"  room orom"),bt.set(t);let e=await Je.getMessages(0);h=0,e=e.reverse(),n(3,i=[...e]),n(2,r=r.map((e=>e._id===t&&(l.responderRooms.indexOf(t)>-1||l.authorRooms.indexOf(t)>-1)?(e.newMessages&&xt.set(a-1),{...e,newMessages:!1}):e))),setTimeout((()=>{window.scrollTo({top:1e24,behavior:"smooth"})}),1)};E((async()=>{await Je.getMe(),n(2,r=await Je.getRooms()),n(2,r=r.map((t=>{if(t.seenByAuthor||-1==l.authorRooms.indexOf(t._id)){if(t.seenByResponder||-1==l.responderRooms.indexOf(t._id))return t;return{...t,newMessages:!0}}return{...t,newMessages:!0}}))),""!=c&&(n(3,i=await Je.getMessages(0)),n(3,i=i.reverse()))})),L((()=>{bt.set("")}));return[s,o,r,i,c,l,u,p,async function(){console.log(p,""),await Je.setProfileShareToTrue(c)},f,async function(){h+=50,n(3,i=await Je.getMessages(h)),n(3,i=i.reverse())},d,m,async function(){try{await Je.leaveRoom(c),window.location.replace("/#/fantasies")}catch(t){console.log(t)}},async function(t){"Enter"===t.code&&d()},async function(){const t=await Je.getUserPhotos(0);n(6,u=[...t.photos]),n(0,s=!0)},t=>{f(t)},function(){o=this.value,n(1,o)},t=>{m(t._id)},()=>{s&&n(0,s=!1)}]}class fn extends nt{constructor(t){super(),et(this,t,pn,un,i,{})}}function dn(e){let n,s,o,r,i,c;return{c(){n=g("label"),s=g("input"),o=w(),r=g("span"),k(s,"type","checkbox"),k(s,"class","svelte-18eq5hr"),k(r,"class","slider svelte-18eq5hr"),k(n,"class","switch svelte-18eq5hr")},m(t,a){f(t,n,a),p(n,s),s.checked=e[0],p(n,o),p(n,r),i||(c=x(s,"change",e[1]),i=!0)},p(t,[e]){1&e&&(s.checked=t[0])},i:t,o:t,d(t){t&&d(n),i=!1,c()}}}function mn(t,e,n){let{checked:s=!1}=e;return t.$$set=t=>{"checked"in t&&n(0,s=t.checked)},[s,function(){s=this.checked,n(0,s)}]}class gn extends nt{constructor(t){super(),et(this,t,mn,dn,i,{checked:0})}}function vn(t){let e,n;return{c(){e=g("img"),S(e,"width","50px"),l(e.src,n="/loading.svg")||k(e,"src","/loading.svg"),k(e,"alt",""),k(e,"class","svelte-157mvri")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function yn(t){let e,n,s=t[5].message+"";return{c(){e=g("span"),n=y(s),k(e,"class","svelte-157mvri")},m(t,s){f(t,e,s),p(e,n)},p(t,e){32&e&&s!==(s=t[5].message+"")&&C(n,s)},d(t){t&&d(e)}}}function wn(t){let e,n,s,r,i,c,a,l,u,m,v,b,C,S,A,$,E,L,T,R,B,O,z,N,j,I,q,D,U,F,H,V,Y,J,X,Z,et,nt,st,ot,rt,it,ct,at;function lt(e){t[13](e)}let ht={};void 0!==t[0]&&(ht.checked=t[0]),V=new gn({props:ht}),M.push((()=>function(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}(V,"checked",lt)));let ut=t[6]&&vn(),pt=t[5]&&yn(t);return{c(){e=g("div"),n=g("label"),s=y("Email"),i=w(),c=g("input"),l=w(),u=g("label"),m=y("Псевдоним"),b=w(),C=g("input"),A=w(),$=g("label"),E=y("Парола"),T=w(),R=g("input"),O=w(),z=g("label"),N=y("Повтори паролата"),I=w(),q=g("input"),U=w(),F=g("p"),H=g("span"),G(V.$$.fragment),J=y("\r\n    Гарантирам, че имам навършени 18 години"),Z=w(),ut&&ut.c(),et=w(),pt&&pt.c(),nt=w(),st=g("span"),ot=y("Регистрирай се"),k(n,"for","inputPrimary"),k(n,"class",r=h(bn(t[1])&&!t[5]?"colorSuccess":"colorPrimary")+" svelte-157mvri"),k(c,"type","text"),k(c,"class",a=h(bn(t[1])&&!t[5]?"inputSuccess":"inputPrimary")+" svelte-157mvri"),k(u,"for","inputPrimary"),k(u,"class",v=h(t[2].length>4&&!t[5]?"colorSuccess":"colorPrimary")+" svelte-157mvri"),k(C,"type","text"),k(C,"class",S=h(t[2].length>4&&!t[5]?"inputSuccess":"inputPrimary")+" svelte-157mvri"),k($,"for","inputPrimary"),k($,"class",L=h(t[3].length>4&&t[3]===t[4]&&!t[5]?"colorSuccess":"colorPrimary")+" svelte-157mvri"),k(R,"type","password"),k(R,"class",B=h(t[3].length>4&&t[3]===t[4]&&!t[5]?"inputSuccess":"inputPrimary")+" svelte-157mvri"),k(z,"for","inputPrimary"),k(z,"class",j=h(t[4].length>4&&t[3]===t[4]&&!t[5]?"colorSuccess":"colorPrimary")+" svelte-157mvri"),k(q,"type","password"),k(q,"class",D=h(t[3].length>4&&t[3]===t[4]&&!t[5]?"inputSuccess":"inputPrimary")+" svelte-157mvri"),k(H,"class","switch"),k(F,"class",X=h(t[0]?"colorSuccess guarantee":"colorPrimary guarantee")+" svelte-157mvri"),k(st,"class",rt=h(t[3].length>4&&t[0]&&t[3]===t[4]&&t[2].length>4&&!t[5]&&bn(t[1])?"neon-button-success":"neon-button")+" svelte-157mvri"),k(e,"class","containElement flexColumn flexAlignCenter svelte-157mvri")},m(o,r){f(o,e,r),p(e,n),p(n,s),p(e,i),p(e,c),_(c,t[1]),p(e,l),p(e,u),p(u,m),p(e,b),p(e,C),_(C,t[2]),p(e,A),p(e,$),p($,E),p(e,T),p(e,R),_(R,t[3]),p(e,O),p(e,z),p(z,N),p(e,I),p(e,q),_(q,t[4]),p(e,U),p(e,F),p(F,H),Q(V,H,null),p(F,J),p(e,Z),ut&&ut.m(e,null),p(e,et),pt&&pt.m(e,null),p(e,nt),p(e,st),p(st,ot),it=!0,ct||(at=[x(c,"input",t[9]),x(c,"input",t[7]),x(C,"input",t[7]),x(C,"input",t[10]),x(R,"input",t[7]),x(R,"input",t[11]),x(q,"input",t[7]),x(q,"input",t[12]),x(st,"click",t[8])],ct=!0)},p(t,[s]){(!it||34&s&&r!==(r=h(bn(t[1])&&!t[5]?"colorSuccess":"colorPrimary")+" svelte-157mvri"))&&k(n,"class",r),(!it||34&s&&a!==(a=h(bn(t[1])&&!t[5]?"inputSuccess":"inputPrimary")+" svelte-157mvri"))&&k(c,"class",a),2&s&&c.value!==t[1]&&_(c,t[1]),(!it||36&s&&v!==(v=h(t[2].length>4&&!t[5]?"colorSuccess":"colorPrimary")+" svelte-157mvri"))&&k(u,"class",v),(!it||36&s&&S!==(S=h(t[2].length>4&&!t[5]?"inputSuccess":"inputPrimary")+" svelte-157mvri"))&&k(C,"class",S),4&s&&C.value!==t[2]&&_(C,t[2]),(!it||56&s&&L!==(L=h(t[3].length>4&&t[3]===t[4]&&!t[5]?"colorSuccess":"colorPrimary")+" svelte-157mvri"))&&k($,"class",L),(!it||56&s&&B!==(B=h(t[3].length>4&&t[3]===t[4]&&!t[5]?"inputSuccess":"inputPrimary")+" svelte-157mvri"))&&k(R,"class",B),8&s&&R.value!==t[3]&&_(R,t[3]),(!it||56&s&&j!==(j=h(t[4].length>4&&t[3]===t[4]&&!t[5]?"colorSuccess":"colorPrimary")+" svelte-157mvri"))&&k(z,"class",j),(!it||56&s&&D!==(D=h(t[3].length>4&&t[3]===t[4]&&!t[5]?"inputSuccess":"inputPrimary")+" svelte-157mvri"))&&k(q,"class",D),16&s&&q.value!==t[4]&&_(q,t[4]);const o={};!Y&&1&s&&(Y=!0,o.checked=t[0],function(t){P.push(t)}((()=>Y=!1))),V.$set(o),(!it||1&s&&X!==(X=h(t[0]?"colorSuccess guarantee":"colorPrimary guarantee")+" svelte-157mvri"))&&k(F,"class",X),t[6]?ut||(ut=vn(),ut.c(),ut.m(e,et)):ut&&(ut.d(1),ut=null),t[5]?pt?pt.p(t,s):(pt=yn(t),pt.c(),pt.m(e,nt)):pt&&(pt.d(1),pt=null),(!it||63&s&&rt!==(rt=h(t[3].length>4&&t[0]&&t[3]===t[4]&&t[2].length>4&&!t[5]&&bn(t[1])?"neon-button-success":"neon-button")+" svelte-157mvri"))&&k(st,"class",rt)},i(t){it||(K(V.$$.fragment,t),it=!0)},o(t){W(V.$$.fragment,t),it=!1},d(t){t&&d(e),tt(V),ut&&ut.d(),pt&&pt.d(),ct=!1,o(at)}}}function bn(t){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(t)}function xn(t,e,n){let s=!1,o="",r="",i="",c="",a=null,l=!1;return[s,o,r,i,c,a,l,function(){a&&n(5,a=null)},function(){i.length>4&&s&&i===c&&r.length>4&&bn(o)&&(n(6,l=!0),Je.register({email:o,username:r,password:i}).then((t=>{n(6,l=!1),window.location.replace("/#/login")})).catch((t=>{n(6,l=!1),n(5,a=t),console.dir(t,"  err")})))},function(){o=this.value,n(1,o)},function(){r=this.value,n(2,r)},function(){i=this.value,n(3,i)},function(){c=this.value,n(4,c)},function(t){s=t,n(0,s)}]}class kn extends nt{constructor(t){super(),et(this,t,xn,wn,i,{})}}function Cn(t,e,n){const s=t.slice();return s[5]=e[n],s}function _n(t){let e,n,s,o,r,i,c,a,l=t[5].content+"";function h(){return t[3](t[5])}return{c(){e=g("p"),n=y(l),s=w(),o=g("br"),r=w(),i=g("button"),i.textContent="Започни чат",k(i,"class","buttonSecondary svelte-1o7f9x3"),k(e,"class","singleFantasy svelte-1o7f9x3")},m(t,l){f(t,e,l),p(e,n),p(e,s),p(e,o),p(e,r),p(e,i),c||(a=x(i,"click",h),c=!0)},p(e,s){t=e,1&s&&l!==(l=t[5].content+"")&&C(n,l)},d(t){t&&d(e),c=!1,a()}}}function Sn(e){let n;return{c(){n=g("h3"),n.textContent="Започнал сте разговор за всяка анонимна фантазия. Изчакайте или споделете\r\n      своя.",S(n,"text-align","left"),k(n,"class","svelte-1o7f9x3")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function An(e){let n,s,o;return{c(){n=g("span"),n.textContent="Зареди още",k(n,"class","neon-button svelte-1o7f9x3")},m(t,r){f(t,n,r),s||(o=x(n,"click",e[2]),s=!0)},p:t,d(t){t&&d(n),s=!1,o()}}}function $n(e){let n,s,o,r,i=e[0],c=[];for(let t=0;t<i.length;t+=1)c[t]=_n(Cn(e,i,t));function a(t,e){return t[0].length>0&&t[0].length%5==0?An:0===t[0].length?Sn:void 0}let l=a(e),h=l&&l(e);return{c(){n=g("div"),s=g("h1"),s.innerHTML='Анонимни\n    <span class="colorSecondary">фантазии</span>',o=w();for(let t=0;t<c.length;t+=1)c[t].c();r=w(),h&&h.c(),k(s,"class","chatWithText svelte-1o7f9x3"),k(n,"class","flexColumn svelte-1o7f9x3")},m(t,e){f(t,n,e),p(n,s),p(n,o);for(let t=0;t<c.length;t+=1)c[t].m(n,null);p(n,r),h&&h.m(n,null)},p(t,[e]){if(3&e){let s;for(i=t[0],s=0;s<i.length;s+=1){const o=Cn(t,i,s);c[s]?c[s].p(o,e):(c[s]=_n(o),c[s].c(),c[s].m(n,r))}for(;s<c.length;s+=1)c[s].d(1);c.length=i.length}l===(l=a(t))&&h?h.p(t,e):(h&&h.d(1),h=l&&l(t),h&&(h.c(),h.m(n,null)))},i:t,o:t,d(t){t&&d(n),m(c,t),h&&h.d()}}}function En(t,e,n){let s=[],o=0;E((async()=>{try{n(0,s=await Je.getFantasies(o))}catch(t){}}));const r=async function(t){await Je.createRoomFromPostId(t._id);const e=await Je.getRoomByPostAndUser(t._id);bt.set(e._id),window.location.replace("/#/chats")};return[s,r,async function(){let t=await Je.getFantasies(o);o+=5,n(0,s=[...s,...t])},t=>{r(t)}]}class Ln extends nt{constructor(t){super(),et(this,t,En,$n,i,{})}}function Tn(e){let n,s,r,i,c,a,l,h,u,m,v,y,b,C;return{c(){n=g("div"),s=g("div"),r=g("h1"),r.textContent="1. Сподели фантазия анонимно / Прочети чужди",i=w(),c=g("h1"),c.textContent="2. Анонимни чатове с непознати",a=w(),l=g("h1"),l.textContent="2. Анонимни чатове с непознати",h=w(),u=g("div"),m=g("button"),m.textContent="Влез",v=w(),y=g("button"),y.textContent="Регистрирай се",k(r,"class","svelte-p7vg6x"),k(c,"class","svelte-p7vg6x"),k(l,"class","svelte-p7vg6x"),k(m,"class","buttonPrimary svelte-p7vg6x"),k(y,"class","buttonPrimary svelte-p7vg6x"),k(u,"class","flexJustifySpaceAround buttonRow flexRow justifyContentSpaceBetween svelte-p7vg6x"),k(s,"class","textCenter svelte-p7vg6x"),k(n,"class","main svelte-p7vg6x")},m(t,o){f(t,n,o),p(n,s),p(s,r),p(s,i),p(s,c),p(s,a),p(s,l),p(s,h),p(s,u),p(u,m),p(u,v),p(u,y),b||(C=[x(m,"click",e[0]),x(y,"click",e[1])],b=!0)},p:t,i:t,o:t,d(t){t&&d(n),b=!1,o(C)}}}function Rn(t){return[()=>{location.assign("/#/login")},()=>{location.assign("/#/register")}]}class Bn extends nt{constructor(t){super(),et(this,t,Rn,Tn,i,{})}}function Mn(t){let n,s,o;const r=[t[2]];var i=t[0];function c(t){let n={};for(let t=0;t<r.length;t+=1)n=e(n,r[t]);return{props:n}}return i&&(n=new i(c()),n.$on("routeEvent",t[7])),{c(){n&&G(n.$$.fragment),s=b()},m(t,e){n&&Q(n,t,e),f(t,s,e),o=!0},p(t,e){const o=4&e?X(r,[Z(t[2])]):{};if(i!==(i=t[0])){if(n){Y();const t=n;W(t.$$.fragment,1,0,(()=>{tt(t,1)})),J()}i?(n=new i(c()),n.$on("routeEvent",t[7]),G(n.$$.fragment),K(n.$$.fragment,1),Q(n,s.parentNode,s)):n=null}else i&&n.$set(o)},i(t){o||(n&&K(n.$$.fragment,t),o=!0)},o(t){n&&W(n.$$.fragment,t),o=!1},d(t){t&&d(s),n&&tt(n,t)}}}function On(t){let n,s,o;const r=[{params:t[1]},t[2]];var i=t[0];function c(t){let n={};for(let t=0;t<r.length;t+=1)n=e(n,r[t]);return{props:n}}return i&&(n=new i(c()),n.$on("routeEvent",t[6])),{c(){n&&G(n.$$.fragment),s=b()},m(t,e){n&&Q(n,t,e),f(t,s,e),o=!0},p(t,e){const o=6&e?X(r,[2&e&&{params:t[1]},4&e&&Z(t[2])]):{};if(i!==(i=t[0])){if(n){Y();const t=n;W(t.$$.fragment,1,0,(()=>{tt(t,1)})),J()}i?(n=new i(c()),n.$on("routeEvent",t[6]),G(n.$$.fragment),K(n.$$.fragment,1),Q(n,s.parentNode,s)):n=null}else i&&n.$set(o)},i(t){o||(n&&K(n.$$.fragment,t),o=!0)},o(t){n&&W(n.$$.fragment,t),o=!1},d(t){t&&d(s),n&&tt(n,t)}}}function Pn(t){let e,n,s,o;const r=[On,Mn],i=[];function c(t,e){return t[1]?0:1}return e=c(t),n=i[e]=r[e](t),{c(){n.c(),s=b()},m(t,n){i[e].m(t,n),f(t,s,n),o=!0},p(t,[o]){let a=e;e=c(t),e===a?i[e].p(t,o):(Y(),W(i[a],1,1,(()=>{i[a]=null})),J(),n=i[e],n?n.p(t,o):(n=i[e]=r[e](t),n.c()),K(n,1),n.m(s.parentNode,s))},i(t){o||(K(n),o=!0)},o(t){W(n),o=!1},d(t){i[e].d(t),t&&d(s)}}}function zn(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let s="";return n>-1&&(s=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:s}}const Nn=gt(null,(function(t){t(zn());const e=()=>{t(zn())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));yt(Nn,(t=>t.location)),yt(Nn,(t=>t.querystring));const jn=vt(void 0);function In(t,e){if(e=Dn(e),!t||!t.tagName||"a"!=t.tagName.toLowerCase())throw Error('Action "link" can only be used with <a> tags');return qn(t,e),{update(e){e=Dn(e),qn(t,e)}}}function qn(t,e){let n=e.href||t.getAttribute("href");if(n&&"/"==n.charAt(0))n="#"+n;else if(!n||n.length<2||"#/"!=n.slice(0,2))throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",(t=>{t.preventDefault(),e.disabled||function(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0,void 0),window.location.hash=t}(t.currentTarget.getAttribute("href"))}))}function Dn(t){return t&&"string"==typeof t?{href:t}:t||{}}function Un(t,e,n){let{routes:s={}}=e,{prefix:o=""}=e,{restoreScrollState:r=!1}=e;class i{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:s}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,s,o,r,i=[],c="",a=t.split("/");for(a[0]||a.shift();o=a.shift();)"*"===(n=o[0])?(i.push("wild"),c+="/(.*)"):":"===n?(s=o.indexOf("?",1),r=o.indexOf(".",1),i.push(o.substring(1,~s?s:~r?r:o.length)),c+=~s&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(c+=(~s?"?":"")+"\\"+o.substring(r))):c+="/"+o;return{keys:i,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.component,this.conditions=e.conditions||[],this.userData=e.userData,this.props=e.props||{}):(this.component=()=>Promise.resolve(e),this.conditions=[],this.props={}),this._pattern=n,this._keys=s}match(t){if(o)if("string"==typeof o){if(!t.startsWith(o))return null;t=t.substr(o.length)||"/"}else if(o instanceof RegExp){const e=t.match(o);if(!e||!e[0])return null;t=t.substr(e[0].length)||"/"}const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let s=0;for(;s<this._keys.length;){try{n[this._keys[s]]=decodeURIComponent(e[s+1]||"")||null}catch(t){n[this._keys[s]]=null}s++}return n}async checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!await this.conditions[e](t))return!1;return!0}}const c=[];s instanceof Map?s.forEach(((t,e)=>{c.push(new i(e,t))})):Object.keys(s).forEach((t=>{c.push(new i(t,s[t]))}));let a=null,l=null,h={};const u=T();async function p(t,e){await(j(),z),u(t,e)}let f=null,d=null;r&&(d=t=>{f=t.state&&t.state.__svelte_spa_router_scrollY?t.state:null},window.addEventListener("popstate",d),function(t){$().$$.after_update.push(t)}((()=>{f?window.scrollTo(f.__svelte_spa_router_scrollX,f.__svelte_spa_router_scrollY):window.scrollTo(0,0)})));let m=null,g=null;const v=Nn.subscribe((async t=>{m=t;let e=0;for(;e<c.length;){const s=c[e].match(t.location);if(!s){e++;continue}const o={route:c[e].path,location:t.location,querystring:t.querystring,userData:c[e].userData,params:s&&"object"==typeof s&&Object.keys(s).length?s:null};if(!await c[e].checkConditions(o))return n(0,a=null),g=null,void p("conditionsFailed",o);p("routeLoading",Object.assign({},o));const r=c[e].component;if(g!=r){r.loading?(n(0,a=r.loading),g=r,n(1,l=r.loadingParams),n(2,h={}),p("routeLoaded",Object.assign({},o,{component:a,name:a.name,params:l}))):(n(0,a=null),g=null);const e=await r();if(t!=m)return;n(0,a=e&&e.default||e),g=r}return s&&"object"==typeof s&&Object.keys(s).length?n(1,l=s):n(1,l=null),n(2,h=c[e].props),void p("routeLoaded",Object.assign({},o,{component:a,name:a.name,params:l})).then((()=>{jn.set(l)}))}n(0,a=null),g=null,jn.set(void 0)}));return L((()=>{v(),d&&window.removeEventListener("popstate",d)})),t.$$set=t=>{"routes"in t&&n(3,s=t.routes),"prefix"in t&&n(4,o=t.prefix),"restoreScrollState"in t&&n(5,r=t.restoreScrollState)},t.$$.update=()=>{32&t.$$.dirty&&(history.scrollRestoration=r?"manual":"auto")},[a,l,h,s,o,r,function(e){R.call(this,t,e)},function(e){R.call(this,t,e)}]}class Fn extends nt{constructor(t){super(),et(this,t,Un,Pn,i,{routes:3,prefix:4,restoreScrollState:5})}}function Hn(t){let e;return{c(){e=y(t[0])},m(t,n){f(t,e,n)},p(t,n){1&n&&C(e,t[0])},d(t){t&&d(e)}}}function Vn(e){let n,s,r,i,c,a,l,h,m,y,b,C,_,S,A,$,E,L,T,R,B,M,O,P,z,N,j,I,q,D,U,F,H,V,Y,J=e[0]>0&&Hn(e);return{c(){n=g("nav"),s=g("ul"),r=g("li"),i=g("a"),i.innerHTML='<span class="link-text logo-text svelte-100o400">Меню</span> \n        <svg aria-hidden="true" focusable="false" data-prefix="fad" data-icon="angle-double-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-angle-double-right fa-w-14 fa-5x svelte-100o400"><g class="fa-group"><path fill="currentColor" d="M224 273L88.37 409a23.78 23.78 0 0 1-33.8 0L32 386.36a23.94\n              23.94 0 0 1 0-33.89l96.13-96.37L32 159.73a23.94 23.94 0 0 1\n              0-33.89l22.44-22.79a23.78 23.78 0 0 1 33.8 0L223.88 239a23.94\n              23.94 0 0 1 .1 34z" class="fa-secondary svelte-100o400"></path><path fill="currentColor" d="M415.89 273L280.34 409a23.77 23.77 0 0 1-33.79 0L224\n              386.26a23.94 23.94 0 0 1 0-33.89L320.11 256l-96-96.47a23.94 23.94\n              0 0 1 0-33.89l22.52-22.59a23.77 23.77 0 0 1 33.79 0L416 239a24 24\n              0 0 1-.11 34z" class="fa-primary svelte-100o400"></path></g></svg>',c=w(),a=g("li"),l=g("a"),l.innerHTML='<svg height="100px" width="100px" fill="currentColor" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" class="svelte-100o400"><path d="M97.9,7.87c-0.05-0.77-0.55-1.45-1.27-1.73c-0.72-0.28-1.54-0.13-2.11,0.4c-5.94,5.55-10.79,8.24-14.83,8.24\n            c-3.12,0-5.71-1.51-8.69-3.26c-3.47-2.03-7.4-4.33-12.77-4.33c-2.7,0-5.5,0.57-8.53,1.74c-3.02-1.17-5.82-1.74-8.53-1.74\n            c-5.38,0-9.31,2.3-12.77,4.33c-2.99,1.75-5.57,3.26-8.69,3.26c-4.09,0-8.8-2.62-14.83-8.24C4.3,6.01,3.49,5.86,2.76,6.14\n            C2.04,6.42,1.54,7.09,1.49,7.87C1.42,8.9-0.18,33.31,12.22,46.62c5.13,5.51,11.91,8.31,20.14,8.31c7.61,0,13.51-1.74,17.33-3.34\n            c3.82,1.6,9.72,3.34,17.33,3.34c8.23,0,15.01-2.79,20.14-8.31c1.03-1.1,1.93-2.31,2.78-3.55v52.3h8.05V12.69\n            C98.03,9.94,97.92,8.13,97.9,7.87z\n            M41.57,33.12c-0.74,4.14-6.71,6.54-13.34,5.35c-6.63-1.18-11.4-5.5-10.66-9.64\n            c0.74-4.15,6.71-6.54,13.34-5.36C37.53,24.66,42.31,28.97,41.57,33.12z\n            M71.16,38.48c-6.63,1.18-12.6-1.21-13.34-5.35\n            c-0.74-4.15,4.03-8.46,10.66-9.65c6.63-1.18,12.6,1.21,13.34,5.36C82.55,32.97,77.78,37.29,71.16,38.48z"></path></svg> \n        <span class="link-text svelte-100o400">Профил</span>',h=w(),m=g("li"),y=g("a"),b=v("svg"),C=v("g"),_=v("rect"),S=v("text"),J&&J.c(),A=v("g"),$=v("path"),E=v("path"),L=v("path"),T=v("path"),R=v("g"),B=v("path"),M=v("path"),O=w(),P=g("span"),P.textContent="Чатове",N=w(),j=g("li"),I=g("a"),I.innerHTML='<svg height="100px" width="100px" fill="currentColor" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 326 336.084" style="enable-background:new 0 0 326 336.084;" xml:space="preserve" class="svelte-100o400"><g><path d="M170.141,116.411c5.526-0.227,10.343,0.331,11.939,3.738l4.336-0.662c0.507-3.728,4.937-5.696,10.281-7.128\n              c4.636-1.243,8.652-1.732,10.952,0.151c1.983-6.541,3.989-12.598,5.411-16.773c0.725-0.583,1.439-1.171,2.13-1.771\n              c4.037-3.528,7.455-7.331,9.988-11.299c2.502-3.973,4.253-8.142,4.291-12.727c0.008-2.319-0.521-4.756-1.725-6.938\n              c-1.804-3.314-4.967-5.72-8.644-7.117c-3.711-1.419-8.058-2.044-13.286-2.053c-3.237,0.001-6.828,0.256-10.81,0.774\n              c3.148,3.101,5.365,7.067,6.339,11.404c1.615-0.119,3.111-0.18,4.471-0.179c5.648-0.027,9.024,1.039,10.349,1.926\n              c0.686,0.443,0.912,0.756,1.06,1.012c0.137,0.262,0.238,0.557,0.247,1.17c0.037,1.174-0.642,3.547-2.412,6.281\n              c-2.604,4.122-7.373,8.929-13.162,12.887c-5.78,3.985-12.575,7.162-19.114,8.557c-6.471,1.394-13.793,2.213-20.353,2.209\n              c-6.043,0.021-11.491-0.746-14.697-1.999c-1.608-0.605-2.574-1.303-2.913-1.689c-0.334-0.426-0.255-0.295-0.299-0.648\n              c-0.004-0.303,0.11-1.13,0.848-2.502c1.422-2.801,5.396-7.225,12.487-12.813c-1.914-4.352-2.432-9.156-1.448-13.877\n              c-6.755,4.791-11.871,9.1-15.656,13.088c-2.57,2.72-4.54,5.303-5.953,7.925c-1.4,2.612-2.272,5.336-2.277,8.179\n              c-0.043,3.345,1.398,6.62,3.514,8.825c3.198,3.348,7.285,4.939,11.726,6.03c2.13,0.503,4.378,0.858,6.711,1.097\n              c1.068,1.759,2.958,4.978,4.956,8.887C160.811,117.446,165.008,116.622,170.141,116.411z"></path><path d="M203.688,126.649c-1.061,0.614-2.229,1.113-3.488,1.451c-5.761,1.543-11.339-0.702-13.213-5.064l-4.393,0.67\n              c-0.488,4.723-5.143,8.53-11.102,8.775c-2.743,0.113-5.317-0.555-7.418-1.754c1.934,5.115,3.267,10.308,2.941,14.446\n              c-0.378,4.807-1.846,8.273-3.431,11.58c6.145-4.689,14.001-7.505,22.565-7.505c5.926,0,11.508,1.355,16.424,3.738\n              c-0.865-2.269-1.547-4.768-1.785-7.812C200.477,141.199,201.77,134.275,203.688,126.649z"></path><ellipse transform="matrix(0.2268 -0.9739 0.9739 0.2268 69.1665 229.146)" cx="178.902" cy="71.011" rx="20.995" ry="20.995"></ellipse><path d="M95.521,192.581c0,4.326,3.507,7.833,7.832,7.833c4.327,0,7.834-3.507,7.834-7.833c0-4.326-3.507-7.833-7.834-7.833\n              C99.028,184.748,95.521,188.254,95.521,192.581z\n              M108.961,193.415c0,2.669-2.164,4.832-4.834,4.832\n              c-2.668,0-4.832-2.163-4.832-4.832c0-2.67,2.164-4.833,4.832-4.833C106.797,188.582,108.961,190.745,108.961,193.415z"></path><path d="M61.283,267.929c-2.885-1.338-5.049-4.019-5.635-7.329c-0.193-1.094-0.193-2.176-0.037-3.218\n              c-1.484-0.849-2.863-1.845-4.122-2.965H43.5c-2.209,0-4,1.791-4,4v14c0,2.209,1.791,4,4,4h23.784\n              C63.938,274.966,61.544,271.738,61.283,267.929z"></path><path d="M109.764,230.522c0,0.048,0.008,0.102,0.006,0.148c-0.023,0.83-0.145,1.589-0.939,2.875\n              c-0.805,1.266-2.436,3.049-5.59,5.067c-6.275,4.061-18.502,8.734-39.143,12.364c-4.35,0.771-7.252,4.924-6.481,9.274\n              c0.688,3.878,4.063,6.604,7.869,6.604c0.463,0,0.932-0.041,1.402-0.125c16.365-2.906,28.279-6.409,37.117-10.422\n              c8.799-4.02,14.728-8.599,18.309-14.151c2.373-3.677,3.477-7.771,3.455-11.487c-0.051-6.464-2.828-11.322-5.191-14.579\n              c-0.046-0.063-0.091-0.116-0.137-0.178c-2.363-3.16-4.539-4.962-4.861-5.235h-0.002c-3.41-2.809-8.451-2.32-11.26,1.09\n              c-1.585,1.926-2.118,4.372-1.67,6.642c-0.027,0.061-0.064,0.122-0.088,0.182c-2.811,7.28-5.619,14.559-8.428,21.838\n              c3.723-1.566,6.256-2.848,8.029-3.502C104.629,236.018,107.252,233.522,109.764,230.522z"></path><path d="M63.752,249.006c11.371-2,19.6-4.472,25.609-6.693c0.216-0.756,0.396-1.529,0.535-2.321\n              c2.15-12.237-6.029-23.898-18.266-26.047c-12.236-2.145-23.897,6.033-26.045,18.27c-1.652,9.422,2.819,18.498,10.548,23.157\n              C57.334,252.164,60.14,249.648,63.752,249.006z"></path><path d="M4,336.084h24c2.209,0,4-1.791,4-4v-6h262v6c0,2.209,1.791,4,4,4h24c2.209,0,4-1.791,4-4v-71.333c0-2.209-1.791-4-4-4h-24\n              c-2.209,0-4,1.791-4,4v18.666h-29.973c0.238-0.731,0.51-1.456,0.799-2.176c0.27-0.672,0.56-1.338,0.87-2h3.874\n              c6.904,0,12.5-5.597,12.5-12.5c0-2.454-0.717-4.734-1.938-6.665c0.506-0.491,0.998-0.959,1.477-1.405\n              c3.749-3.496,6.559-5.586,6.559-5.586c-7.444-12.21-55.155-26.9-95.487-34.041c-8.205-1.453-16.104-2.592-23.297-3.335\n              c-16.814-1.737-29.772-1.306-33.737,2.376c-1.652,1.535-3.473,4.011-5.364,7.151c-1.975-0.809-3.905-1.695-5.767-2.663\n              c2.147,3.921,3.222,7.906,3.256,12.086c0.012,2.05-0.296,4.136-0.877,6.172c4.197-9.555,8.412-16.974,11.473-19.817\n              c0.412-0.381,3.039-2.291,14.322-2.291c18.26,0,48.598,4.998,77.291,12.732c30.119,8.12,46.318,15.934,52.418,21.137\n              c-7.488,6.357-24.602,22.865-23.727,40.357c-0.061,0.219-1.721,3.721-23.938,3.721c-13.494,0-30.713-1.249-47.363-2.457\n              l-0.199-0.015c-16.688-1.213-33.941-2.464-47.414-2.464c-13.582,0-21.654,1.209-26.17,3.92c-0.375,0.225-0.672,0.371-0.898,0.469\n              c-0.932-2.976-0.418-14.15,6.727-35.734c1.639-4.947,3.42-9.768,5.244-14.264c-0.215,0.376-0.431,0.751-0.666,1.116\n              c-3.771,5.852-10.039,10.721-19.16,14.89c-9.475,4.301-21.773,7.759-37.602,10.572c-0.576,0.101-1.164,0.153-1.746,0.153\n              c-0.725,0-1.43-0.086-2.113-0.233c0.656,3.758,3.928,6.618,7.873,6.618H95.18h6.595h8.297c-0.303,1.44-0.569,2.835-0.798,4.176H32\n              v-88c0-2.209-1.791-4-4-4H4c-2.209,0-4,1.791-4,4v140.667C0,334.293,1.791,336.084,4,336.084z"></path><path d="M82.961,202.688c4.05,0,7.332-3.282,7.332-7.332c0-4.051-3.282-7.333-7.332-7.333c-4.051,0-7.333,3.282-7.333,7.333\n              C75.628,199.406,78.91,202.688,82.961,202.688z\n              M83.961,191.523c2.669,0,4.832,2.163,4.832,4.833c0,2.669-2.163,4.832-4.832,4.832\n              c-2.67,0-4.833-2.163-4.833-4.832C79.128,193.686,81.291,191.523,83.961,191.523z"></path><path d="M116.604,184.355c5.386,0,9.75-4.364,9.75-9.749c0-5.385-4.364-9.75-9.75-9.75c-5.384,0-9.748,4.365-9.748,9.75\n              C106.855,179.991,111.22,184.355,116.604,184.355z\n              M116.877,168.856c3.637,0,6.584,2.947,6.584,6.584\n              c0,3.635-2.947,6.582-6.584,6.582c-3.635,0-6.582-2.947-6.582-6.582C110.295,171.803,113.242,168.856,116.877,168.856z"></path><path d="M178.918,163.905c10.12,10.508,25.574,15.199,40.561,10.859c0.419-0.122,0.82-0.274,1.232-0.408\n              c15.361-4.979,25.828-18.32,27.759-33.489c23.414-7.258,40.42-29.085,40.42-54.885c0-31.731-25.723-57.455-57.453-57.455\n              c-1.693,0-3.365,0.088-5.02,0.232C218.674,11.796,201.574,0,181.709,0c-20.596,0-38.223,12.68-45.526,30.654\n              c-2.325-0.986-4.884-1.531-7.568-1.531c-10.723,0-19.416,8.693-19.416,19.416c0,1.594,0.213,3.134,0.575,4.616\n              c-17.355,7.522-29.5,24.798-29.5,44.918c0,21.984,14.496,40.582,34.451,46.758c-0.324,3.346,0.196,6.816,1.725,10.082\n              c3.523,7.523,11.253,11.709,19.072,11.109c2.403,6.881,8.038,12.235,15.081,14.276c2.004,0.581,4.114,0.908,6.306,0.908\n              C167.573,181.206,176.513,173.831,178.918,163.905z\n              M151.503,174.701c-6.184-0.918-11.622-4.119-15.418-8.729\n              c2.087-0.222,4.174-0.768,6.182-1.708c1.052-0.493,2.026-1.082,2.944-1.729c-10.115,2.135-20.732-2.86-25.305-12.626\n              c-2.221-4.745-2.66-9.863-1.599-14.609c-0.934,1.294-1.69,2.697-2.279,4.168c-16.618-6.907-28.306-23.289-28.306-42.407\n              c0-17.194,9.458-32.17,23.449-40.037c1.152,2.365,2.764,4.459,4.73,6.167c-1.495-2.769-2.346-5.937-2.346-9.304\n              c0-10.832,8.781-19.614,19.613-19.614c0.564,0,1.119,0.038,1.671,0.084c-1.469,4.664-2.265,9.626-2.265,14.775\n              c0,1.21,0.059,2.405,0.145,3.593c1.813-24.605,22.336-44.009,47.404-44.009c16.443,0,30.936,8.349,39.475,21.038\n              c-7.555,1.583-14.561,4.651-20.705,8.883c7.74-4.173,16.595-6.545,26.004-6.545c30.309,0,54.879,24.571,54.879,54.879\n              c0,21.745-12.647,40.533-30.986,49.416c0.059-3.934-0.453-7.943-1.605-11.919c-1.042-3.6-2.548-6.938-4.42-9.982\n              c0.233,0.675,0.452,1.359,0.653,2.053c6.097,21.053-5.44,43.028-25.906,50.135c-0.683,0.237-1.374,0.459-2.076,0.662\n              c-12.85,3.721-26.041,0.87-35.988-6.567c0.071-0.729,0.109-1.469,0.109-2.216c0-1.093-0.082-2.165-0.23-3.217\n              c-2.331,11.214-12.268,19.642-24.173,19.642C153.913,174.979,152.695,174.878,151.503,174.701z"></path><path d="M36.691,148.866c19.887-37.049-2.293-38.76-8.568-35.352c-6.275,3.408-5.585,9.283-5.585,9.283s-4.553-3.779-10.826-0.373\n              C5.434,125.832-5.213,145.364,36.691,148.866z"></path><path d="M72.369,153.513c-4.295-1.952-7.117,0.749-7.117,0.749s0.181-3.904-4.111-5.857c-4.296-1.955-18.831,0.203-4.004,23.691\n              C84.585,167.842,76.662,155.466,72.369,153.513z"></path></g></svg> \n        <span class="link-text svelte-100o400">Анонимни\n          <br/>\n          фантазии</span>',q=w(),D=g("li"),D.innerHTML='<a href="/#/write" class="nav-link svelte-100o400"><svg width="24px" height="24px" viewBox="-2 -2 24 24" fill="currentColor " xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin" class="jam jam-write svelte-100o400"><path d="M5.72 14.456l1.761-.508 10.603-10.73a.456.456 0 0\n            0-.003-.64l-.635-.642a.443.443 0 0 0-.632-.003L6.239 12.635l-.52\n            1.82zM18.703.664l.635.643c.876.887.884 2.318.016 3.196L8.428\n            15.561l-3.764 1.084a.901.901 0 0 1-1.11-.623.915.915 0 0\n            1-.002-.506l1.095-3.84L15.544.647a2.215 2.215 0 0 1 3.159.016zM7.184\n            1.817c.496 0 .898.407.898.909a.903.903 0 0 1-.898.909H3.592c-.992\n            0-1.796.814-1.796 1.817v10.906c0 1.004.804 1.818 1.796\n            1.818h10.776c.992 0 1.797-.814\n            1.797-1.818v-3.635c0-.502.402-.909.898-.909s.898.407.898.91v3.634c0\n            2.008-1.609 3.636-3.593 3.636H3.592C1.608 19.994 0 18.366 0\n            16.358V5.452c0-2.007 1.608-3.635 3.592-3.635h3.592z"></path></svg> \n        <span class="link-text svelte-100o400">Пиши</span></a>',U=w(),F=g("li"),H=g("a"),H.innerHTML='<svg height="100px" width="100px" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" fill="currentColor" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" class="svelte-100o400"><path d="M 12.6875 5 A 3.0003 3.0003 0 0 0 10 8 L 10 75.34375 A 3.0003\n            3.0003 0 0 0 11.84375 78.125 L 51.84375 94.78125 A 3.0003 3.0003 0 0\n            0 56 92 L 56 78 L 64 78 A 3.0003 3.0003 0 0 0 67 75 L 67 8 A 3.0003\n            3.0003 0 0 0 64 5 L 13 5 A 3.0003 3.0003 0 0 0 12.6875 5 z M\n            27.03125 11 L 61 11 L 61 72 L 56 72 L 56 26 A 3.0003 3.0003 0 0 0\n            54.21875 23.25 L 27.03125 11 z M 16 12.625 L 50 27.9375 L 50 87.5 L\n            16 73.375 L 16 12.625 z M 76.8125 28.96875 A 3.0003 3.0003 0 0 0 75\n            34.21875 L 79.1875 38 L 73 38 A 3.0003 3.0003 0 0 0 72.6875 38 A\n            3.0040663 3.0040663 0 1 0 73 44 L 79.1875 44 L 75 47.78125 A 3.0003\n            3.0003 0 1 0 79 52.21875 L 89 43.21875 A 3.0003 3.0003 0 0 0 89\n            38.78125 L 79 29.78125 A 3.0003 3.0003 0 0 0 76.8125 28.96875 z M\n            36.71875 44.96875 A 3.0003 3.0003 0 0 0 35.8125 50.75 L 41 52.96875\n            L 41 56 A 3.0003 3.0003 0 1 0 47 56 L 47 51 A 3.0003 3.0003 0 0 0\n            45.1875 48.25 L 38.1875 45.25 A 3.0003 3.0003 0 0 0 37.03125\n            44.96875 A 3.0003 3.0003 0 0 0 36.71875 44.96875 z "></path></svg> \n        <span class="link-text svelte-100o400">Изход</span>',k(i,"href","/#/"),k(i,"class","nav-link svelte-100o400"),k(r,"class","logo svelte-100o400"),k(l,"href","/#/"),k(l,"class","nav-link svelte-100o400"),k(a,"class","nav-item svelte-100o400"),k(_,"x","-233.895"),k(_,"y","-7.333"),k(_,"display","inline"),k(_,"fill","#ff3e41"),k(_,"width","435.561"),k(_,"height","207"),k(C,"display","none"),k($,"display","inline"),k($,"fill","currentColor"),k($,"stroke","currentColor"),k($,"stroke-width","2"),k($,"stroke-miterlimit","10"),k($,"d","M29.63,1H14.684\r\n              c-0.747,0-1.359,0.619-1.359,1.376v9.633c0,0.757,0.611,1.376,1.359,1.376h7.133l5.095,4.128v-4.128h2.717\r\n              c0.747,0,1.359-0.619,1.359-1.376V2.376C30.988,1.619,30.377,1,29.63,1z"),k(E,"display","inline"),k(E,"fill","currentColor"),k(E,"stroke","currentColor"),k(E,"stroke-width","2"),k(E,"stroke-miterlimit","10"),k(E,"d","M17.316,13.389H2.37\r\n              c-0.747,0-1.359,0.619-1.359,1.376v9.633c0,0.757,0.611,1.376,1.359,1.376h2.717v4.128l5.095-4.128h7.133\r\n              c0.747,0,1.359-0.619,1.359-1.376v-9.633C18.675,14.008,18.064,13.389,17.316,13.389z"),k(L,"display","inline"),k(L,"fill","currentColor"),k(L,"d","M9.847,22.327l-2.611-2.733c-0.613-0.638-0.613-1.626,0-2.246\r\n              c0.285-0.287,0.686-0.446,1.132-0.446c0.417,0,0.801,0.139,1.08,0.394l0.39,0.356l0.396-0.348c0.305-0.267,0.681-0.409,1.085-0.409\r\n              c0.431,0,0.833,0.162,1.126,0.446c0.616,0.623,0.619,1.614,0.003,2.255L9.847,22.327z"),k(T,"display","inline"),k(T,"fill","currentColor"),k(T,"d","M22.161,10.223L19.55,7.49c-0.613-0.638-0.613-1.626,0-2.246\r\n              c0.285-0.287,0.686-0.446,1.132-0.446c0.417,0,0.801,0.139,1.08,0.394l0.39,0.356l0.396-0.348c0.305-0.267,0.681-0.409,1.085-0.409\r\n              c0.431,0,0.833,0.162,1.126,0.446c0.616,0.623,0.619,1.614,0.003,2.255L22.161,10.223z"),k(A,"display","none"),k(B,"d","M17.316,12.389H2.37c-1.301,0-2.358,1.066-2.358,2.376v9.633c0,1.311,1.058,2.376,2.358,2.376h1.718V32l6.449-5.226h6.779\r\n              c1.301,0,2.358-1.065,2.358-2.376v-9.633C19.675,13.455,18.617,12.389,17.316,12.389z\r\n              M13.163,19.593l-3.315,3.477L6.523,19.59\r\n              c-0.781-0.812-0.781-2.071,0-2.861c0.362-0.365,0.874-0.568,1.443-0.568c0.531,0,1.02,0.177,1.375,0.502l0.497,0.454l0.504-0.443\r\n              c0.389-0.34,0.867-0.521,1.383-0.521c0.549,0,1.061,0.207,1.435,0.569C13.944,17.515,13.948,18.777,13.163,19.593z"),k(M,"d","M29.63,0H14.684c-1.301,0-2.358,1.066-2.358,2.376v9.633c0,1.31,1.058,2.376,2.358,2.376h6.779l6.449,5.226v-5.226h1.718\r\n              c1.301,0,2.358-1.066,2.358-2.376V2.376C31.988,1.066,30.931,0,29.63,0z\r\n              M25.477,7.689l-3.315,3.477l-3.326-3.481\r\n              c-0.781-0.812-0.781-2.071,0-2.861c0.362-0.365,0.874-0.568,1.443-0.568c0.531,0,1.02,0.177,1.375,0.502l0.497,0.454l0.505-0.443\r\n              c0.389-0.34,0.867-0.521,1.383-0.521c0.549,0,1.061,0.207,1.435,0.568C26.258,5.61,26.261,6.873,25.477,7.689z"),k(b,"height","100px"),k(b,"width","100px"),k(b,"fill","currentColor"),k(b,"xmlns","http://www.w3.org/2000/svg"),k(b,"xmlns:xlink","http://www.w3.org/1999/xlink"),k(b,"version","1.1"),k(b,"x","0px"),k(b,"y","0px"),k(b,"viewBox","0 0 32 32"),k(b,"enable-background","new 0 0 32 32"),k(b,"xml:space","preserve"),k(b,"class","svelte-100o400"),k(P,"class","link-text svelte-100o400"),k(y,"href","/#/"),k(y,"class",z="nav-link "+(0===e[0]?"":"hovered-link-class")+" svelte-100o400"),k(m,"class","nav-item svelte-100o400"),k(I,"href","/#/"),k(I,"class","nav-link svelte-100o400"),k(j,"class","nav-item svelte-100o400"),k(D,"class","nav-item svelte-100o400"),k(H,"href","/#/"),k(H,"class","nav-link svelte-100o400"),k(F,"class","nav-item svelte-100o400"),k(s,"class","navbar-nav svelte-100o400"),k(n,"class","navbar svelte-100o400")},m(t,o){f(t,n,o),p(n,s),p(s,r),p(r,i),p(s,c),p(s,a),p(a,l),p(s,h),p(s,m),p(m,y),p(y,b),p(b,C),p(C,_),p(b,S),J&&J.m(S,null),p(b,A),p(A,$),p(A,E),p(A,L),p(A,T),p(b,R),p(R,B),p(R,M),p(y,O),p(y,P),p(s,N),p(s,j),p(j,I),p(s,q),p(s,D),p(s,U),p(s,F),p(F,H),V||(Y=[u(In.call(null,i,"/")),u(In.call(null,l,"/profile")),u(In.call(null,y,"/chats")),u(In.call(null,I,"/fantasies")),x(H,"click",e[1])],V=!0)},p(t,[e]){t[0]>0?J?J.p(t,e):(J=Hn(t),J.c(),J.m(S,null)):J&&(J.d(1),J=null),1&e&&z!==(z="nav-link "+(0===t[0]?"":"hovered-link-class")+" svelte-100o400")&&k(y,"class",z)},i:t,o:t,d(t){t&&d(n),J&&J.d(),V=!1,o(Y)}}}function Yn(t,e,n){let{count:s=0}=e;xt.subscribe((t=>{n(0,s=t)}));return t.$$set=t=>{"count"in t&&n(0,s=t.count)},[s,()=>{localStorage.removeItem("fappUser"),localStorage.removeItem("fappToken"),wt.set({})}]}class Jn extends nt{constructor(t){super(),et(this,t,Yn,Vn,i,{count:0})}}function Kn(e){let n,s,o,r,i,c,a,l;return{c(){n=g("nav"),s=g("ul"),o=g("li"),r=g("a"),r.innerHTML='<span class="link-text logo-text svelte-1tvblvb">Меню</span> \n        <svg aria-hidden="true" focusable="false" data-prefix="fad" data-icon="angle-double-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-angle-double-right fa-w-14 fa-5x svelte-1tvblvb"><g class="fa-group"><path fill="currentColor" d="M224 273L88.37 409a23.78 23.78 0 0 1-33.8 0L32 386.36a23.94\n              23.94 0 0 1 0-33.89l96.13-96.37L32 159.73a23.94 23.94 0 0 1\n              0-33.89l22.44-22.79a23.78 23.78 0 0 1 33.8 0L223.88 239a23.94\n              23.94 0 0 1 .1 34z" class="fa-secondary svelte-1tvblvb"></path><path fill="currentColor" d="M415.89 273L280.34 409a23.77 23.77 0 0 1-33.79 0L224\n              386.26a23.94 23.94 0 0 1 0-33.89L320.11 256l-96-96.47a23.94 23.94\n              0 0 1 0-33.89l22.52-22.59a23.77 23.77 0 0 1 33.79 0L416 239a24 24\n              0 0 1-.11 34z" class="fa-primary svelte-1tvblvb"></path></g></svg>',i=w(),c=g("li"),c.innerHTML='<a href="/#/login" class="nav-link svelte-1tvblvb"><svg height="100px" width="100px" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" fill="currentColor" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" class="svelte-1tvblvb"><path d="M 35.6875 5 A 3.0003 3.0003 0 0 0 33 8 L 33 75 A 3.0003 3.0003 0\n            0 0 36 78 L 44 78 L 44 92 A 3.0003 3.0003 0 0 0 48.15625 94.78125 L\n            88.15625 78.125 A 3.0003 3.0003 0 0 0 90 75.34375 L 90 8 A 3.0003\n            3.0003 0 0 0 87 5 L 36 5 A 3.0003 3.0003 0 0 0 35.6875 5 z M 39 11 L\n            72.96875 11 L 45.78125 23.25 A 3.0003 3.0003 0 0 0 44 26 L 44 72 L\n            39 72 L 39 11 z M 84 12.625 L 84 73.375 L 50 87.5 L 50 27.9375 L 84\n            12.625 z M 16.8125 28.96875 A 3.0003 3.0003 0 0 0 15 34.21875 L\n            19.1875 38 L 13 38 A 3.0003 3.0003 0 0 0 12.6875 38 A 3.0040663\n            3.0040663 0 1 0 13 44 L 19.1875 44 L 15 47.78125 A 3.0003 3.0003 0 1\n            0 19 52.21875 L 29 43.21875 A 3.0003 3.0003 0 0 0 29 38.78125 L 19\n            29.78125 A 3.0003 3.0003 0 0 0 16.8125 28.96875 z M 62.90625 45 A\n            3.0003 3.0003 0 0 0 61.8125 45.25 L 54.8125 48.25 A 3.0003 3.0003 0\n            0 0 53 51 L 53 56 A 3.0003 3.0003 0 1 0 59 56 L 59 52.96875 L\n            64.1875 50.75 A 3.0003 3.0003 0 0 0 62.90625 45 z "></path></svg> \n        <span class="link-text svelte-1tvblvb">Вход</span></a>',k(r,"href","/#/"),k(r,"class","nav-link svelte-1tvblvb"),k(o,"class","logo svelte-1tvblvb"),k(c,"class","nav-item svelte-1tvblvb"),k(s,"class","navbar-nav svelte-1tvblvb"),k(n,"class","navbar svelte-1tvblvb")},m(t,e){f(t,n,e),p(n,s),p(s,o),p(o,r),p(s,i),p(s,c),a||(l=u(In.call(null,r,"/")),a=!0)},p:t,i:t,o:t,d(t){t&&d(n),a=!1,l()}}}class Wn extends nt{constructor(t){super(),et(this,t,null,Kn,i,{})}}function Xn(t,e,n){const s=t.slice();return s[9]=e[n],s}function Zn(t){let e;return{c(){e=g("span"),e.textContent="Натисни ТУК, за да качиш снимка"},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Gn(t){let e,n;return{c(){e=g("img"),k(e,"class","loadingImage svelte-8n19b4"),l(e.src,n="/loading.svg")||k(e,"src","/loading.svg"),k(e,"alt","")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Qn(t){let e,n,s,r,i,c,a,h,u,m,v,y,b;function C(){return t[6](t[9])}function _(){return t[7](t[9])}return{c(){e=g("div"),n=g("img"),i=w(),c=g("div"),a=g("div"),a.textContent="ИЗТРИЙ",h=w(),u=g("div"),u.textContent="СЛОЖИ АВАТАР",m=w(),l(n.src,s=t[9].imageUrl)||k(n,"src",s),k(n,"class","displayBlock svelte-8n19b4"),k(n,"alt",r=t[9].imageUrl),k(a,"class","span4e buttonPrimary svelte-8n19b4"),k(u,"class","span4e buttonSuccess svelte-8n19b4"),k(c,"class","flexRow svelte-8n19b4"),k(e,"class",v="photo "+(t[9]._id===t[0].avatar?"borderSuccess":"")+" svelte-8n19b4")},m(t,s){f(t,e,s),p(e,n),p(e,i),p(e,c),p(c,a),p(c,h),p(c,u),p(e,m),y||(b=[x(a,"click",C),x(u,"click",_)],y=!0)},p(o,i){t=o,2&i&&!l(n.src,s=t[9].imageUrl)&&k(n,"src",s),2&i&&r!==(r=t[9].imageUrl)&&k(n,"alt",r),3&i&&v!==(v="photo "+(t[9]._id===t[0].avatar?"borderSuccess":"")+" svelte-8n19b4")&&k(e,"class",v)},d(t){t&&d(e),y=!1,o(b)}}}function ts(e){let n,s,o;return{c(){n=g("span"),n.textContent="Зареди още",k(n,"class","neon-button svelte-8n19b4")},m(t,r){f(t,n,r),s||(o=x(n,"click",e[3]),s=!0)},p:t,d(t){t&&d(n),s=!1,o()}}}function es(e){let n,s,o,r,i,c,a,l,h;function u(t,e){return t[2]?Gn:Zn}let v=u(e),y=v(e),b=e[1],C=[];for(let t=0;t<b.length;t+=1)C[t]=Qn(Xn(e,b,t));let _=e[1].length%20==0&&e[1].length>1&&ts(e);return{c(){n=g("div"),s=g("label"),o=g("input"),r=w(),y.c(),i=w(),c=g("div");for(let t=0;t<C.length;t+=1)C[t].c();a=w(),_&&_.c(),k(o,"type","file"),k(o,"accept",".jpg, .jpeg, .png"),k(o,"class","invis svelte-8n19b4"),k(s,"class","uploadUi buttonPrimary svelte-8n19b4"),k(c,"class","photoGallery svelte-8n19b4")},m(t,u){f(t,n,u),p(n,s),p(s,o),p(s,r),y.m(s,null),p(n,i),p(n,c);for(let t=0;t<C.length;t+=1)C[t].m(c,null);p(n,a),_&&_.m(n,null),l||(h=x(o,"change",e[5]),l=!0)},p(t,[e]){if(v!==(v=u(t))&&(y.d(1),y=v(t),y&&(y.c(),y.m(s,null))),3&e){let n;for(b=t[1],n=0;n<b.length;n+=1){const s=Xn(t,b,n);C[n]?C[n].p(s,e):(C[n]=Qn(s),C[n].c(),C[n].m(c,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=b.length}t[1].length%20==0&&t[1].length>1?_?_.p(t,e):(_=ts(t),_.c(),_.m(n,null)):_&&(_.d(1),_=null)},i:t,o:t,d(t){t&&d(n),y.d(),m(C,t),_&&_.d(),l=!1,h()}}}function ns(t,e,n){let s={},o=[],r=0,i=!1;wt.subscribe((t=>{n(0,s=t)}));const c=async t=>{let e=t.target.files[0];const s=new FormData;n(2,i=!0),s.append("upload",e);try{const t=await Je.postFile("/upload",s);n(1,o=[t.photo,...o]),n(2,i=!1)}catch(t){}};E((async()=>{const t=await Je.getUserPhotos(r);await Je.getMe(),n(1,o=[...t.photos])}));return[s,o,i,async function(){r+=20;const t=await Je.getUserPhotos(r);n(1,o=[...o,...t.photos])},c,t=>c(t),async t=>{await Je.deletePhoto(t._id),n(1,o=o.filter((e=>e._id!=t._id)))},async t=>{await Je.setAvatar(t._id),await Je.getMe()}]}class ss extends nt{constructor(t){super(),et(this,t,ns,es,i,{})}}function os(t){let e,n,s,o,r,i,c,a,l,h=t[0].username+"";return a=new ss({}),{c(){e=g("div"),n=g("h1"),s=y("Здравей "),o=y(h),r=w(),i=g("p"),i.textContent="Аватарът е видим само за потребители, на които си споделил профил",c=w(),G(a.$$.fragment),k(i,"class","svelte-1fn37b2"),k(e,"class","svelte-1fn37b2")},m(t,h){f(t,e,h),p(e,n),p(n,s),p(n,o),p(e,r),p(e,i),p(e,c),Q(a,e,null),l=!0},p(t,[e]){(!l||1&e)&&h!==(h=t[0].username+"")&&C(o,h)},i(t){l||(K(a.$$.fragment,t),l=!0)},o(t){W(a.$$.fragment,t),l=!1},d(t){t&&d(e),tt(a)}}}function rs(t,e,n){let s={};return wt.subscribe((t=>{n(0,s=t)})),[s]}class is extends nt{constructor(t){super(),et(this,t,rs,os,i,{})}}function cs(t){let e,n;return{c(){e=g("img"),S(e,"width","50px"),l(e.src,n="/loading.svg")||k(e,"src","/loading.svg"),k(e,"alt",""),k(e,"class","svelte-1l0n1in")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function as(t){let e,n,s=t[2].message+"";return{c(){e=g("span"),n=y(s),k(e,"class","svelte-1l0n1in")},m(t,s){f(t,e,s),p(e,n)},p(t,e){4&e&&s!==(s=t[2].message+"")&&C(n,s)},d(t){t&&d(e)}}}function ls(e){let n,s,r,i,c,a,l,h,u,m,v=e[1]&&cs(),y=e[2]&&as(e);return{c(){n=g("div"),s=g("h1"),s.textContent="Сподели фантазия (максимум 800 символа)",r=w(),i=g("textarea"),c=w(),v&&v.c(),a=w(),y&&y.c(),l=w(),h=g("span"),h.textContent="Сподели",k(s,"class","svelte-1l0n1in"),k(i,"class","textAreaSuccess svelte-1l0n1in"),k(i,"rows","10"),k(i,"cols","55"),k(i,"maxlength","800"),k(h,"class","neon-button-success svelte-1l0n1in"),k(n,"class","container svelte-1l0n1in")},m(t,o){f(t,n,o),p(n,s),p(n,r),p(n,i),_(i,e[0]),p(n,c),v&&v.m(n,null),p(n,a),y&&y.m(n,null),p(n,l),p(n,h),u||(m=[x(i,"input",e[4]),x(h,"click",e[3])],u=!0)},p(t,[e]){1&e&&_(i,t[0]),t[1]?v||(v=cs(),v.c(),v.m(n,a)):v&&(v.d(1),v=null),t[2]?y?y.p(t,e):(y=as(t),y.c(),y.m(n,l)):y&&(y.d(1),y=null)},i:t,o:t,d(t){t&&d(n),v&&v.d(),y&&y.d(),u=!1,o(m)}}}function hs(t,e,n){let s="",o=!1,r=null;return[s,o,r,async function(){n(1,o=!0);try{await Je.write(s),n(1,o=!1),window.location.replace("/#/fantasies")}catch(t){n(2,r=t),n(1,o=!1)}},function(){s=this.value,n(0,s)}]}class us extends nt{constructor(t){super(),et(this,t,hs,ls,i,{})}}function ps(t){let e;return{c(){e=g("span"),e.textContent="Тук има някаква грешка...",k(e,"class","svelte-1fqte8x")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function fs(t){let e,n;return{c(){e=g("img"),S(e,"width","50px"),l(e.src,n="/loading.svg")||k(e,"src","/loading.svg"),k(e,"alt",""),k(e,"class","svelte-1fqte8x")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function ds(e){let n,s,r,i,c,a,l,u,m,v,b,C,S,A,$,E,L,T,R,B,M,O,P,z,N=e[2]&&ps(),j=e[3]&&fs();return{c(){n=g("div"),s=g("label"),r=y("Email"),c=w(),a=g("input"),u=w(),m=g("label"),v=y("Парола"),C=w(),S=g("input"),$=w(),N&&N.c(),E=w(),L=g("div"),T=w(),j&&j.c(),R=w(),B=g("span"),M=y("Заповядай"),k(s,"for","inputPrimary"),k(s,"class",i=h(e[4](e[0])&&!e[2]?"colorSuccess":"colorPrimary")+" svelte-1fqte8x"),k(a,"type","text"),k(a,"class",l=h(e[4](e[0])&&!e[2]?"inputSuccess":"inputPrimary")+" svelte-1fqte8x"),k(m,"for","inputPrimary"),k(m,"class",b=h(e[1].length>4&&!e[2]?"colorSuccess":"colorPrimary")+" svelte-1fqte8x"),k(S,"type","password"),k(S,"class",A=h(e[1].length>4&&!e[2]?"inputSuccess":"inputPrimary")+" svelte-1fqte8x"),k(L,"class","svelte-1fqte8x"),k(B,"class",O=h(e[1].length>4&&e[4](e[0])&&!e[2]?"neon-button-success":"neon-button")+" svelte-1fqte8x"),k(n,"class","flexColumn flexAlignCenter svelte-1fqte8x")},m(t,o){f(t,n,o),p(n,s),p(s,r),p(n,c),p(n,a),_(a,e[0]),p(n,u),p(n,m),p(m,v),p(n,C),p(n,S),_(S,e[1]),p(n,$),N&&N.m(n,null),p(n,E),p(n,L),p(n,T),j&&j.m(n,null),p(n,R),p(n,B),p(B,M),P||(z=[x(a,"input",e[6]),x(a,"input",e[7]),x(S,"input",e[8]),x(S,"input",e[9]),x(B,"click",e[5])],P=!0)},p(t,[e]){5&e&&i!==(i=h(t[4](t[0])&&!t[2]?"colorSuccess":"colorPrimary")+" svelte-1fqte8x")&&k(s,"class",i),5&e&&l!==(l=h(t[4](t[0])&&!t[2]?"inputSuccess":"inputPrimary")+" svelte-1fqte8x")&&k(a,"class",l),1&e&&a.value!==t[0]&&_(a,t[0]),6&e&&b!==(b=h(t[1].length>4&&!t[2]?"colorSuccess":"colorPrimary")+" svelte-1fqte8x")&&k(m,"class",b),6&e&&A!==(A=h(t[1].length>4&&!t[2]?"inputSuccess":"inputPrimary")+" svelte-1fqte8x")&&k(S,"class",A),2&e&&S.value!==t[1]&&_(S,t[1]),t[2]?N||(N=ps(),N.c(),N.m(n,E)):N&&(N.d(1),N=null),t[3]?j||(j=fs(),j.c(),j.m(n,R)):j&&(j.d(1),j=null),7&e&&O!==(O=h(t[1].length>4&&t[4](t[0])&&!t[2]?"neon-button-success":"neon-button")+" svelte-1fqte8x")&&k(B,"class",O)},i:t,o:t,d(t){t&&d(n),N&&N.d(),j&&j.d(),P=!1,o(z)}}}function ms(t,e,n){let s="",o="",r=!1,i=!1;return[s,o,r,i,function(t){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(t)&&!r},async function(){try{n(3,i=!0),await Je.login({email:s,password:o}),n(3,i=!1),window.location.replace("/#/")}catch(t){n(3,i=!1),n(2,r=!0)}},function(){s=this.value,n(0,s)},()=>{n(2,r=!1)},()=>{n(2,r=!1)},function(){o=this.value,n(1,o)}]}class gs extends nt{constructor(t){super(),et(this,t,ms,ds,i,{})}}function vs(e){let n,s;return n=new Wn({}),{c(){G(n.$$.fragment)},m(t,e){Q(n,t,e),s=!0},p:t,i(t){s||(K(n.$$.fragment,t),s=!0)},o(t){W(n.$$.fragment,t),s=!1},d(t){tt(n,t)}}}function ys(t){let e,n;return e=new Jn({props:{count:t[1]}}),{c(){G(e.$$.fragment)},m(t,s){Q(e,t,s),n=!0},p(t,n){const s={};2&n&&(s.count=t[1]),e.$set(s)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function ws(e){let n,s;return n=new Fn({props:{routes:{"/":Bn,"/register":kn,"/login":gs}}}),{c(){G(n.$$.fragment)},m(t,e){Q(n,t,e),s=!0},p:t,i(t){s||(K(n.$$.fragment,t),s=!0)},o(t){W(n.$$.fragment,t),s=!1},d(t){tt(n,t)}}}function bs(e){let n,s;return n=new Fn({props:{routes:{"/write":us,"/profile":is,"/":Ln,"/chat":fn,"/chats":fn,"/fantasies":Ln}}}),{c(){G(n.$$.fragment)},m(t,e){Q(n,t,e),s=!0},p:t,i(t){s||(K(n.$$.fragment,t),s=!0)},o(t){W(n.$$.fragment,t),s=!1},d(t){tt(n,t)}}}function xs(t){let e,n,s,o,r,i,c,a;const l=[ys,vs],h=[];function u(t,e){return t[0]?.email?0:1}n=u(t),s=h[n]=l[n](t);const m=[bs,ws],v=[];function y(t,e){return t[0]?.email?0:1}return i=y(t),c=v[i]=m[i](t),{c(){e=g("main"),s.c(),o=w(),r=g("div"),c.c(),k(r,"class","container svelte-mplo87"),k(e,"class","svelte-mplo87")},m(t,s){f(t,e,s),h[n].m(e,null),p(e,o),p(e,r),v[i].m(r,null),a=!0},p(t,[a]){let p=n;n=u(t),n===p?h[n].p(t,a):(Y(),W(h[p],1,1,(()=>{h[p]=null})),J(),s=h[n],s?s.p(t,a):(s=h[n]=l[n](t),s.c()),K(s,1),s.m(e,o));let f=i;i=y(t),i===f?v[i].p(t,a):(Y(),W(v[f],1,1,(()=>{v[f]=null})),J(),c=v[i],c?c.p(t,a):(c=v[i]=m[i](t),c.c()),K(c,1),c.m(r,null))},i(t){a||(K(s),K(c),a=!0)},o(t){W(s),W(c),a=!1},d(t){t&&d(e),h[n].d(),v[i].d()}}}function ks(t,e,n){let s={},o=0;wt.subscribe((t=>{n(0,s=t)})),localStorage.getItem("fappUser")&&wt.set(JSON.parse(localStorage.getItem("fappUser"))),xt.subscribe((t=>{n(1,o=t)})),E((()=>{r(),Je.getNewMessagesCount().then((t=>{xt.set(t.count)})).catch((t=>{console.log(t," wtf")}))}));const r=function(){He.auth={userId:s._id},He.connect()};return[s,o]}return new class extends nt{constructor(t){super(),et(this,t,ks,xs,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
